<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PROPELLINI ‚Äì –ü—Ä–µ–º–∏–∞–ª—å–Ω–∞—è –æ–∫–ª–µ–π–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –∑–∞—â–∏—Ç–Ω–æ–π –ø–ª–µ–Ω–∫–æ–π</title>
  <!-- Mobile fixes applied -->
  <meta name="description" content="–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –æ–∫–ª–µ–π–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –∞–Ω—Ç–∏–≥—Ä–∞–≤–∏–π–Ω–æ–π –ø–ª–µ–Ω–∫–æ–π –≤ –ú–æ—Å–∫–≤–µ. –ü—Ä–µ–º–∏—É–º –∫–∞—á–µ—Å—Ç–≤–æ, –≥–∞—Ä–∞–Ω—Ç–∏—è, –ª—É—á—à–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:wght@400;500&family=Unbounded:wght@400;500;600;700;800;900&display=swap&subset=cyrillic,latin" rel="stylesheet">
  <link rel="stylesheet" href="src/styles/fonts.css" />
  <link rel="stylesheet" href="src/styles/main.css" />
  <link rel="stylesheet" href="src/styles/responsive-bg.css" />
  <link rel="stylesheet" href="src/styles/animations.css" />
  <link rel="stylesheet" href="src/styles/mobile-premium.css" />
  <link rel="stylesheet" href="src/styles/mobile-fixes.css" />
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
</head>
<body>
  <div class="noise-layer"></div>
  
  <!-- Navigation -->
  <nav class="main-nav" id="mainNav">
    <div class="nav-container">
      <a href="#hero" class="nav-logo" id="navLogo" tabindex="0" aria-label="–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≥–ª–∞–≤–Ω—É—é">
        <img src="public/logo/icon-black.png" alt="Propellini" class="nav-logo-icon" />
        <span class="nav-logo-text">PROPELLINI</span>
      </a>
      <button class="nav-toggle" id="navToggle" aria-label="–ú–µ–Ω—é" tabindex="0">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <ul class="nav-menu" id="navMenu">
        <li><a href="#hero" tabindex="0">–ì–ª–∞–≤–Ω–∞—è</a></li>
        <li><a href="#benefits" tabindex="0">–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞</a></li>
        <li><a href="#about" tabindex="0">–û –Ω–∞—Å</a></li>
        <li><a href="#services" tabindex="0">–£—Å–ª—É–≥–∏</a></li>
        <li><a href="#" id="calculatorNavBtn" tabindex="0">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</a></li>
        <li><a href="#films" tabindex="0">–ü–ª–µ–Ω–∫–∏</a></li>
        <li><a href="#process" tabindex="0">–ü—Ä–æ—Ü–µ—Å—Å</a></li>
        <li><a href="#portfolio" tabindex="0">–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ</a></li>
        <li><a href="#reviews" tabindex="0">–û—Ç–∑—ã–≤—ã</a></li>
        <li><a href="#contacts" tabindex="0">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
      </ul>
    </div>
  </nav>

  <!-- 1. HERO SECTION -->
  <section class="hero hero-section responsive-bg premium-bg-overlay premium-processed parallax-image" id="hero" data-bg-desktop="/public/images/hero/hero-desktop.jpg" data-bg-mobile="/public/images/hero/hero-mobile.jpg">
    <div class="hero-overlay"></div>
    <div class="hero-content">
      <h1 class="hero-title">–û–∫–ª–µ–π–∫–∞<br>–∞–≤—Ç–æ–º–æ–±–∏–ª—è<br>–∑–∞—â–∏—Ç–Ω–æ–π –ø–ª–µ–Ω–∫–æ–π</h1>
      <div class="hero-banners-wrapper">
      <div class="hero-promo">
        <p class="hero-promo-text">–°–∫–∏–¥–∫–∞ 50% –Ω–∞ –±—Ä–æ–Ω—é –ª–æ–±–æ–≤–æ–≥–æ<br>—Å—Ç–µ–∫–ª–∞ –ø—Ä–∏ –ø–æ–ª–Ω–æ–π –æ–∫–ª–µ–π–∫–µ –∫—É–∑–æ–≤–∞</p>
        <a href="#contacts" class="btn btn-primary discount-open-btn" tabindex="0">–ü–æ–ª—É—á–∏—Ç—å —Å–∫–∏–¥–∫—É</a>
        </div>
        <div class="hero-gift-banner">
          <div class="hero-gift-icon">üéÅ</div>
          <p class="hero-gift-text">–ü—Ä–∏ –ø–æ–ª–Ω–æ–π –æ–∫–ª–µ–π–∫–µ –∫—É–∑–æ–≤–∞<br><strong>—ç–≤–∞–∫—É–∞—Ç–æ—Ä –∏–ª–∏ —Ç–æ–Ω–∏—Ä–æ–≤–∫–∞ –≤ –ø–æ–¥–∞—Ä–æ–∫</strong></p>
        </div>
      </div>
      <div class="hero-pricing">
        <div class="hero-pricing-item">
          <span class="hero-pricing-label">–û–∫–ª–µ–π–∫–∞ –∑–æ–Ω —Ä–∏—Å–∫–∞ –æ—Ç</span>
          <strong class="hero-pricing-value">25 000 ‚ÇΩ</strong>
        </div>
        <div class="hero-pricing-item">
          <span class="hero-pricing-label">–û–∫–ª–µ–π–∫–∞ –∫—É–∑–æ–≤–∞ —Ü–µ–ª–∏–∫–æ–º –æ—Ç</span>
          <strong class="hero-pricing-value">180 000 ‚ÇΩ</strong>
        </div>
      </div>
      <div class="hero-cta">
        <a href="#" class="btn btn-primary calculator-open-btn" id="heroCalculatorBtn" tabindex="0">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å</a>
        <a href="#portfolio" class="btn btn-secondary" tabindex="0">–ù–∞—à–∏ —Ä–∞–±–æ—Ç—ã</a>
      </div>
      <div class="hero-contacts">
        <a href="tel:+79919361489" class="hero-phone">+7(991)936-14-89</a>
        <a href="mailto:info@proppelini.ru" class="hero-email">info@proppelini.ru</a>
        <p class="hero-address">–ú–æ—Å–∫–≤–∞, —É–ª. –ê–≤–∏–∞—Ü–∏–æ–Ω–Ω–∞—è, 79 –∫. 1</p>
      </div>
    </div>
    <div class="hero-scroll-indicator">
      <span>–ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑</span>
      <div class="scroll-arrow"></div>
    </div>
  </section>

  <!-- 2. UTP / BENEFITS SECTION -->
  <section class="benefits" id="benefits">
    <div class="container">
      <h2 class="section-title">–ü–æ—á–µ–º—É –≤—ã–±–∏—Ä–∞—é—Ç PROPELLINI</h2>
      <div class="benefits-grid">
        <div class="benefit-card-glass" data-animate="fade-up">
          <div class="benefit-glass-content">
            <h3 class="benefit-glass-title">–ü—Ä–µ–º–∏—É–º –º–∞—Ç–µ—Ä–∏–∞–ª—ã</h3>
            <p class="benefit-glass-text">–¢–æ–ª—å–∫–æ —Å–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–ª–µ–Ω–∫–∏ –º–∏—Ä–æ–≤—ã—Ö –±—Ä–µ–Ω–¥–æ–≤</p>
          </div>
        </div>
        <div class="benefit-card-glass" data-animate="fade-up">
          <div class="benefit-glass-content">
            <h3 class="benefit-glass-title">–ì–∞—Ä–∞–Ω—Ç–∏—è –∫–∞—á–µ—Å—Ç–≤–∞</h3>
            <p class="benefit-glass-text">–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –≥–∞—Ä–∞–Ω—Ç–∏—è –Ω–∞ –≤—Å–µ –≤–∏–¥—ã —Ä–∞–±–æ—Ç</p>
          </div>
        </div>
        <div class="benefit-card-glass" data-animate="fade-up">
          <div class="benefit-glass-content">
            <h3 class="benefit-glass-title">–û–ø—ã—Ç–Ω—ã–µ –º–∞—Å—Ç–µ—Ä–∞</h3>
            <p class="benefit-glass-text">–ö–æ–º–∞–Ω–¥–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤ —Å –º–Ω–æ–≥–æ–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º</p>
          </div>
        </div>
        <div class="benefit-card-glass" data-animate="fade-up">
          <div class="benefit-glass-content">
            <h3 class="benefit-glass-title">–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</h3>
            <p class="benefit-glass-text">–ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–¥–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</p>
          </div>
        </div>
        <div class="benefit-card-glass" data-animate="fade-up">
          <div class="benefit-glass-content">
            <h3 class="benefit-glass-title">–ë—ã—Å—Ç—Ä—ã–µ —Å—Ä–æ–∫–∏</h3>
            <p class="benefit-glass-text">–í—ã–ø–æ–ª–Ω—è–µ–º —Ä–∞–±–æ—Ç—ã –≤ –æ–≥–æ–≤–æ—Ä–µ–Ω–Ω—ã–µ —Å—Ä–æ–∫–∏</p>
          </div>
        </div>
        <div class="benefit-card-glass" data-animate="fade-up">
          <div class="benefit-glass-content">
            <h3 class="benefit-glass-title">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥</h3>
            <p class="benefit-glass-text">–£—á–∏—Ç—ã–≤–∞–µ–º –≤—Å–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 3. ABOUT PROPELLINI SECTION -->
  <section class="about" id="about">
    <div class="about-background about-section responsive-bg premium-bg-overlay-strong premium-processed" data-bg-desktop="/public/images/about/about-desktop.jpg" data-bg-mobile="/public/images/about/about-mobile.jpg">
      <div class="about-overlay"></div>
    </div>
    <div class="container">
      <div class="about-content" data-animate="slide-left">
        <h2 class="section-title">–û PROPELLINI</h2>
        <p class="about-text">–ü—Ä–µ–º–∏–∞–ª—å–Ω–∞—è —Å—Ç—É–¥–∏—è –æ–∫–ª–µ–π–∫–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –∑–∞—â–∏—Ç–Ω–æ–π –ø–ª–µ–Ω–∫–æ–π –≤ –ú–æ—Å–∫–≤–µ. –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –∫—É–∑–æ–≤–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ª—É—á—à–∏—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π. –ú–Ω–æ–≥–æ–ª–µ—Ç–Ω–∏–π –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–º–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è–º–∏.</p>
      </div>
      
      <!-- Achievement Cards -->
      <div class="about-achievements">
        <div class="achievement-card" data-animate="fade-up">
          <div class="achievement-number">12+</div>
          <div class="achievement-label">–ª–µ—Ç –Ω–∞ —Ä—ã–Ω–∫–µ</div>
        </div>
        <div class="achievement-card" data-animate="fade-up">
          <div class="achievement-number">7,000+</div>
          <div class="achievement-label">–∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –æ–∫–ª–µ–µ–Ω–æ</div>
        </div>
        <div class="achievement-card" data-animate="fade-up">
          <div class="achievement-number">10</div>
          <div class="achievement-label">–ª–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–∏ –Ω–∞ –ø—Ä–µ–º–∏—É–º –ø–ª–µ–Ω–∫—É</div>
        </div>
        <div class="achievement-card" data-animate="fade-up">
          <div class="achievement-number">100%</div>
          <div class="achievement-label">—Å–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Å—Ç–µ—Ä–∞</div>
        </div>
      </div>

      <!-- Promo Block -->
      <div class="about-promo" data-animate="fade-up">
        <div class="promo-content">
          <h3 class="promo-title">–°–∫–∏–¥–∫–∞ 50% –Ω–∞ –±—Ä–æ–Ω—é –ª–æ–±–æ–≤–æ–≥–æ —Å—Ç–µ–∫–ª–∞</h3>
          <p class="promo-subtitle">–ø—Ä–∏ –ø–æ–ª–Ω–æ–π –æ–∫–ª–µ–π–∫–µ –∫—É–∑–æ–≤–∞</p>
          <a href="#contacts" class="btn btn-primary promo-btn discount-open-btn" tabindex="0">–ü–æ–ª—É—á–∏—Ç—å —Å–∫–∏–¥–∫—É</a>
        </div>
      </div>
    </div>
  </section>

  <!-- 4. SERVICE PACKAGES SECTION -->
  <section class="services" id="services">
    <div class="container">
      <h2 class="section-title">–ü–∞–∫–µ—Ç—ã —É—Å–ª—É–≥</h2>
      <div class="services-grid">
        <div class="service-card" data-animate="fade-up">
          <div class="service-badge">–ë–∞–∑–æ–≤—ã–π</div>
          <h3>–ó–æ–Ω—ã —Ä–∏—Å–∫–∞</h3>
          <p>–ó–∞—â–∏—Ç–∞ –Ω–∞–∏–±–æ–ª–µ–µ —É—è–∑–≤–∏–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∫—É–∑–æ–≤–∞</p>
          <ul class="service-features">
            <li>–ö–∞–ø–æ—Ç</li>
            <li>–ë–∞–º–ø–µ—Ä—ã</li>
            <li>–ó–µ—Ä–∫–∞–ª–∞</li>
            <li>–ü–æ—Ä–æ–≥–∏</li>
          </ul>
          <a href="#" class="btn btn-primary calculator-open-btn" tabindex="0">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</a>
        </div>
        <div class="service-card service-card-featured" data-animate="fade-up">
          <div class="service-badge">–ü—Ä–µ–º–∏—É–º</div>
          <h3>–ü–æ–ª–Ω–∞—è –æ–∫–ª–µ–π–∫–∞</h3>
          <p>–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –≤—Å–µ–≥–æ –∫—É–∑–æ–≤–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è</p>
          <ul class="service-features">
            <li>–í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∫—É–∑–æ–≤–∞</li>
            <li>–ü—Ä–µ–º–∏—É–º –º–∞—Ç–µ—Ä–∏–∞–ª—ã</li>
            <li>–ì–∞—Ä–∞–Ω—Ç–∏—è 5 –ª–µ—Ç</li>
            <li>–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</li>
          </ul>
          <a href="#" class="btn btn-primary calculator-open-btn" tabindex="0">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</a>
        </div>
        <div class="service-card" data-animate="fade-up">
          <div class="service-badge">–õ—é–∫—Å</div>
          <h3>–ü—Ä–µ–º–∏—É–º –ø–∞–∫–µ—Ç</h3>
          <p>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ —É—Å–ª—É–≥–∞–º–∏</p>
          <ul class="service-features">
            <li>–ü–æ–ª–Ω–∞—è –æ–∫–ª–µ–π–∫–∞</li>
            <li>–ö–µ—Ä–∞–º–∏—á–µ—Å–∫–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ</li>
            <li>–ì–∞—Ä–∞–Ω—Ç–∏—è 7 –ª–µ—Ç</li>
            <li>–ü–æ–∂–∏–∑–Ω–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞</li>
          </ul>
          <a href="#" class="btn btn-primary calculator-open-btn" tabindex="0">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</a>
        </div>
      </div>
    </div>
  </section>

  <!-- 5. CALCULATOR SECTION -->
  <section class="calculator-section" id="calculator">
    <button class="calculator-close-btn" id="calculatorCloseBtn" aria-label="–ó–∞–∫—Ä—ã—Ç—å –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä" tabindex="0">&times;</button>
    <div class="container">
      <h2 class="section-title">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ç–æ–∏–º–æ—Å—Ç–∏</h2>
      <p class="section-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—å –∏ –∑–æ–Ω—ã –æ–∫–ª–µ–π–∫–∏ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏</p>
      
      <!-- Desktop Calculator -->
      <div class="calculator-desktop" id="calculatorDesktop">
        <div class="calculator">
          <header class="calculator-header">
            <div class="address"><strong>–ú–æ—Å–∫–≤–∞, —É–ª. –ü—Ä–∏—à–≤–∏–Ω–∞, –≤–ª2–ê</strong></div>
            <h3>PROPELLINI</h3>
            <p class="subtitle">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –æ–∫–ª–µ–π–∫–∏ –∞–Ω—Ç–∏–≥—Ä–∞–≤–∏–π–Ω–æ–π –ø–ª–µ–Ω–∫–æ–π</p>
          </header>

          <div class="calculator-content">
            <aside class="left-column">
              <section class="car-class-selection card">
                <h2>–í—ã–±—Ä–∞—Ç—å —Ç–∏–ø –∞–≤—Ç–æ</h2>
                <div class="class-options" id="classOptions">
                  <button class="class-option active" data-class="small" tabindex="0"><span class="thumb"></span><div class="class-info"><h3>–ú–∞–ª—ã–π –∫–ª–∞—Å—Å</h3></div></button>
                  <button class="class-option" data-class="business" tabindex="0"><span class="thumb"></span><div class="class-info"><h3>–ë–∏–∑–Ω–µ—Å –∫–ª–∞—Å—Å / –ö—Ä–æ—Å—Å–æ–≤–µ—Ä—ã</h3></div></button>
                  <button class="class-option" data-class="suv-lux" tabindex="0"><span class="thumb"></span><div class="class-info"><h3>–í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫–∏ / –õ—é–∫—Å</h3></div></button>
                  <button class="class-option" data-class="pickup" tabindex="0"><span class="thumb"></span><div class="class-info"><h3>–ë–æ–ª—å—à–∏–µ –ø–∏–∫–∞–ø—ã</h3></div></button>
                  <button class="class-option" data-class="bus" tabindex="0"><span class="thumb"></span><div class="class-info"><h3>–ê–≤—Ç–æ–±—É—Å—ã / –ú–∏–Ω–∏–≤—ç–Ω—ã</h3></div></button>
                </div>
              </section>

              <section class="model-selection card">
                <h2>–í—ã–±–æ—Ä –º–∞—Ä–∫–∏ –∏ –º–æ–¥–µ–ª–∏</h2>
                <div class="search-container">
                  <input type="text" id="modelSearch" placeholder="–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –º–∞—Ä–∫—É –∏–ª–∏ –º–æ–¥–µ–ª—å‚Ä¶" tabindex="0" />
                  <div class="dropdown" id="modelDropdown"></div>
                </div>
                <div class="brands-chips-container">
                  <h3 class="chips-title">–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Ä–∫—É:</h3>
                  <div class="chips-wrapper" id="brandChips"></div>
                </div>
                <div class="models-chips-container">
                  <h3 class="chips-title">–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å:</h3>
                  <div class="chips-wrapper" id="modelChips"></div>
                </div>
                <div class="selected-model" id="selectedModelInfo" style="display:none;">
                  <span id="modelName"></span>
                  <span class="model-class" id="modelClass"></span>
                </div>
              </section>

              <section class="contacts-section card">
                <h3>–ó–∞–∫–∞–∑–∞—Ç—å –∑–≤–æ–Ω–æ–∫</h3>
                <div class="phone-number">8 (968) 811-66-88</div>
                <p class="phone-subtitle">–ü–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º</p>
              </section>
            </aside>

            <section class="right-column">
              <section class="zones-selection card" id="zonesSelection">
                <h2>–í—ã–±—Ä–∞—Ç—å –æ–±–ª–∞—Å—Ç—å –æ–∫–ª–µ–π–∫–∏</h2>
                <div class="quick-buttons">
                  <button id="riskZonesBtn" class="quick-btn" tabindex="0">–û–∫–ª–µ–π–∫–∞ –∑–æ–Ω —Ä–∏—Å–∫–∞</button>
                  <button id="fullWrapBtn" class="quick-btn" tabindex="0">–ü–æ–ª–Ω–∞—è –æ–∫–ª–µ–π–∫–∞ –∫—É–∑–æ–≤–∞</button>
                  <button id="clearZonesBtn" class="quick-btn" tabindex="0">–°–±—Ä–æ—Å–∏—Ç—å</button>
                </div>
                <div class="car-zones-visual" id="car3dContainer">
                  <div id="car3dCanvas"></div>
                  <div class="car-3d-hint">
                    <span>–í—Ä–∞—â–∞—Ç—å –º—ã—à—å—é | –ó—É–º –∫–æ–ª–µ—Å–∏–∫–æ–º</span>
                  </div>
                </div>
                <div id="carSvgFallback" style="display: none;">
                  <svg viewBox="0 0 400 450" width="100%" height="auto">
                    <g id="interactive-zones"></g>
                  </svg>
                </div>
              </section>

              <section class="total-section card">
                <div class="total-header"><h2>–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å</h2></div>
                <div class="total-details">
                  <div class="total-info">
                    <span id="totalZones">0 –∑–æ–Ω</span>
                    <span id="carClassInfo">–ö–ª–∞—Å—Å –Ω–µ –≤—ã–±—Ä–∞–Ω</span>
                  </div>
                  <div class="total-price"><span class="total-amount" id="totalAmount">0 ‚ÇΩ</span></div>
                </div>
                <button class="order-btn" id="orderBtn" tabindex="0">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –æ–∫–ª–µ–π–∫—É</button>
                
                <!-- Application Form inside Calculator -->
                <div class="calculator-application-form" id="calculatorApplicationForm" style="display: none;">
                  <form id="calculatorOrderForm" class="calculator-order-form">
                  <div class="application-form-header">
                    <h3>–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –æ–∫–ª–µ–π–∫—É</h3>
                    <button type="button" class="application-form-close" id="calculatorFormClose" aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
                  </div>
                  
                  <!-- –ü–∞–Ω–µ–ª—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö (–∫–∞–∫ –≤ –º–æ–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏) -->
                  <div class="desktop-summary-card">
                    <div class="desktop-summary-item">
                      <span class="summary-label">–ú–∞—Ä–∫–∞:</span>
                      <span class="summary-value" id="desktopSummaryBrand">‚Äî</span>
                    </div>
                    <div class="desktop-summary-item">
                      <span class="summary-label">–ú–æ–¥–µ–ª—å:</span>
                      <span class="summary-value" id="desktopSummaryModel">‚Äî</span>
                    </div>
                    <div class="desktop-summary-item">
                      <span class="summary-label">–ö–ª–∞—Å—Å:</span>
                      <span class="summary-value" id="desktopSummaryClass">‚Äî</span>
                    </div>
                    <div class="desktop-summary-item">
                      <span class="summary-label">–£—Å–ª—É–≥–∞:</span>
                      <span class="summary-value" id="desktopSummaryService">‚Äî</span>
                    </div>
                    <div class="desktop-summary-total">
                      <span class="summary-label">–ò—Ç–æ–≥–æ:</span>
                      <span class="summary-value-total" id="desktopSummaryTotal">0 ‚ÇΩ</span>
                    </div>
                  </div>
                  
                    <div class="form-group">
                      <label for="calcOrderName">–í–∞—à–µ –∏–º—è *</label>
                      <input type="text" id="calcOrderName" name="name" required placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" tabindex="0" />
                    </div>
                    <div class="form-group">
                      <label for="calcOrderPhone">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
                      <input type="tel" id="calcOrderPhone" name="phone" required placeholder="+7 (___) ___-__-__" tabindex="0" />
                    </div>
                    <div class="form-group">
                      <label for="calcOrderEmail">Email</label>
                      <input type="email" id="calcOrderEmail" name="email" placeholder="email@example.com" tabindex="0" />
                    </div>
                    <div class="form-group">
                      <label for="calcOrderCar">–ê–≤—Ç–æ–º–æ–±–∏–ª—å</label>
                      <input type="text" id="calcOrderCar" name="car" readonly placeholder="–ù–µ –≤—ã–±—Ä–∞–Ω" tabindex="0" />
                    </div>
                    <div class="form-group">
                      <label for="calcOrderServices">–í—ã–±—Ä–∞–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏</label>
                      <textarea id="calcOrderServices" name="services" readonly rows="3" placeholder="–ù–µ –≤—ã–±—Ä–∞–Ω—ã" tabindex="0"></textarea>
                    </div>
                    <div class="form-group">
                      <label for="calcOrderTotal">–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å</label>
                      <input type="text" id="calcOrderTotal" name="total" readonly placeholder="0 ‚ÇΩ" tabindex="0" />
                    </div>
                    <div class="form-group">
                      <label for="calcOrderComment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
                      <textarea id="calcOrderComment" name="comment" rows="3" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è" tabindex="0"></textarea>
                    </div>
                    <div class="form-actions">
                      <button type="button" class="btn btn-outline" id="calcOrderCancel" tabindex="0">–û—Ç–º–µ–Ω–∞</button>
                      <button type="submit" class="btn btn-primary" tabindex="0">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
                    </div>
                  </form>
                </div>
              </section>
            </section>
          </div>
        </div>
      </div>

      <!-- Mobile Calculator Wizard - –ü–†–ï–ú–ò–£–ú –ü–ï–†–ï–†–ê–ë–û–¢–ê–ù–ù–ê–Ø –í–ï–†–°–ò–Ø -->
      <div class="calculator-mobile" id="calculatorMobile">
        <div class="mobile-wizard-new">
          <!-- –®–∞–≥ 0: –í—ã–±–æ—Ä –∫–ª–∞—Å—Å–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è -->
          <div class="mobile-wizard-step active" data-step="0">
            <h3 class="mobile-step-title">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∞–≤—Ç–æ</h3>
            <div class="mobile-class-selection" id="mobileClassSelection">
              <!-- –ö–ª–∞—Å—Å—ã –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
            </div>
          </div>
          
          <!-- –®–∞–≥ 1: –í—ã–±–æ—Ä –º–∞—Ä–∫–∏ -->
          <div class="mobile-wizard-step" data-step="1">
            <h3 class="mobile-step-title">–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Ä–∫—É –∞–≤—Ç–æ–º–æ–±–∏–ª—è</h3>
            <div class="mobile-search-box">
              <input type="text" id="mobileBrandSearch" placeholder="–ü–æ–∏—Å–∫ –º–∞—Ä–∫–∏ –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –Ω–∏–∂–µ..." autocomplete="off" />
            </div>
            <div class="mobile-chips-hint">–ò–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞:</div>
            <div class="mobile-chips-scroll" id="mobileBrandsChips">
              <!-- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ —á–∏–ø—Å—ã –º–∞—Ä–æ–∫ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
            </div>
          </div>

          <!-- –®–∞–≥ 2: –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ -->
          <div class="mobile-wizard-step" data-step="2">
            <h3 class="mobile-step-title">–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å</h3>
            <div class="mobile-selected-brand" id="mobileSelectedBrand"></div>
            <div class="mobile-class-badge" id="mobileClassBadge" style="display: none;">
              <span class="badge-label">–ö–ª–∞—Å—Å:</span>
              <span class="badge-value" id="mobileClassName"></span>
            </div>
            <div class="mobile-search-box">
              <input type="text" id="mobileModelSearch" placeholder="–ü–æ–∏—Å–∫ –º–æ–¥–µ–ª–∏ –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –Ω–∏–∂–µ..." autocomplete="off" />
            </div>
            <div class="mobile-chips-hint">–ò–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞:</div>
            <div class="mobile-chips-scroll" id="mobileModelsChips">
              <!-- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ —á–∏–ø—Å—ã –º–æ–¥–µ–ª–µ–π –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
            </div>
          </div>

          <!-- –®–∞–≥ 3: –í—ã–±–æ—Ä —É—Å–ª—É–≥–∏ -->
          <div class="mobile-wizard-step" data-step="3">
            <h3 class="mobile-step-title">–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É</h3>
            <div class="mobile-selected-car" id="mobileSelectedCar"></div>
            
            <!-- –ü–∞–∫–µ—Ç—ã —É—Å–ª—É–≥ -->
            <div class="mobile-packages-section" id="mobilePackagesSection">
              <h4 class="mobile-section-subtitle">–ü–∞–∫–µ—Ç—ã —É—Å–ª—É–≥</h4>
              <div class="mobile-packages-grid" id="mobilePackagesGrid">
                <!-- –ü–∞–∫–µ—Ç—ã –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
              </div>
            </div>

            <!-- –ò–ª–∏ –∑–æ–Ω—ã –≤—Ä—É—á–Ω—É—é -->
            <div class="mobile-zones-section" id="mobileZonesSection">
              <button class="mobile-zones-toggle" id="mobileZonesToggle" type="button">
                <h4 class="mobile-section-subtitle">–í—ã–±—Ä–∞—Ç—å –∑–æ–Ω—ã —Ä–∏—Å–∫–∞</h4>
                <span class="mobile-zones-toggle-icon">‚ñº</span>
              </button>
              <div class="mobile-zones-list" id="mobileZonesList" style="display: none;">
                <!-- –ó–æ–Ω—ã –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
              </div>
            </div>

            <!-- –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏ –∫–Ω–æ–ø–∫–∞ "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –æ–∫–ª–µ–π–∫—É" -->
            <div class="mobile-step-3-total" style="margin-top: var(--space-lg); padding: var(--space-md); background: rgba(22, 132, 145, 0.1); border-radius: 12px; text-align: center;">
              <div style="font-size: 14px; color: var(--text-muted); margin-bottom: var(--space-xs);">–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:</div>
              <div id="mobileStep3Total" style="font-size: 28px; font-weight: 800; color: var(--primary);">0 ‚ÇΩ</div>
          </div>

            <div class="mobile-step-3-actions" style="margin-top: var(--space-lg);">
              <button type="button" class="mobile-order-btn" id="mobileStep3OrderBtn" style="display: none; width: 100%; padding: var(--space-md); font-size: 16px; font-weight: 600;">
                –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –æ–∫–ª–µ–π–∫—É
              </button>
            </div>
          </div>

          <!-- –®–∞–≥ 4: –ò—Ç–æ–≥ –∏ —Ñ–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞ -->
          <div class="mobile-wizard-step" data-step="4">
            <h3 class="mobile-step-title">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ</h3>
            <div class="mobile-summary-card">
              <div class="mobile-summary-item">
                <span class="summary-label">–ú–∞—Ä–∫–∞:</span>
                <span class="summary-value" id="summaryBrand">‚Äî</span>
              </div>
              <div class="mobile-summary-item">
                <span class="summary-label">–ú–æ–¥–µ–ª—å:</span>
                <span class="summary-value" id="summaryModel">‚Äî</span>
              </div>
              <div class="mobile-summary-item">
                <span class="summary-label">–ö–ª–∞—Å—Å:</span>
                <span class="summary-value" id="summaryClass">‚Äî</span>
              </div>
              <div class="mobile-summary-item">
                <span class="summary-label">–£—Å–ª—É–≥–∞:</span>
                <span class="summary-value" id="summaryService">‚Äî</span>
              </div>
              <div class="mobile-summary-total">
                <span class="summary-label">–ò—Ç–æ–≥–æ:</span>
                <span class="summary-value-total" id="summaryTotal">0 ‚ÇΩ</span>
              </div>
            </div>
            
            <!-- –§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞ -->
            <div class="mobile-order-form-container">
              <h4 class="mobile-form-title">–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</h4>
              <form id="mobileOrderForm" class="mobile-order-form">
                <div class="mobile-form-group">
                  <label for="mobileOrderName">–í–∞—à–µ –∏–º—è *</label>
                  <input type="text" id="mobileOrderName" name="name" required placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" />
                </div>
                <div class="mobile-form-group">
                  <label for="mobileOrderPhone">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
                  <input type="tel" id="mobileOrderPhone" name="phone" required placeholder="+7 (___) ___-__-__" />
                </div>
                <div class="mobile-form-group">
                  <label for="mobileOrderEmail">Email</label>
                  <input type="email" id="mobileOrderEmail" name="email" placeholder="email@example.com" />
                </div>
                <div class="mobile-form-group">
                  <label for="mobileOrderCar">–ê–≤—Ç–æ–º–æ–±–∏–ª—å</label>
                  <input type="text" id="mobileOrderCar" name="car" readonly placeholder="–ù–µ –≤—ã–±—Ä–∞–Ω" />
                </div>
                <div class="mobile-form-group">
                  <label for="mobileOrderServices">–í—ã–±—Ä–∞–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏</label>
                  <textarea id="mobileOrderServices" name="services" readonly rows="2" placeholder="–ù–µ –≤—ã–±—Ä–∞–Ω—ã"></textarea>
                </div>
                <div class="mobile-form-group">
                  <label for="mobileOrderTotal">–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å</label>
                  <input type="text" id="mobileOrderTotal" name="total" readonly placeholder="0 ‚ÇΩ" />
                </div>
                <div class="mobile-form-group">
                  <label for="mobileOrderComment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
                  <textarea id="mobileOrderComment" name="comment" rows="3" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"></textarea>
                </div>
                <button type="submit" class="mobile-order-btn" id="mobileOrderSubmitBtn">
                  –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É
            </button>
                <p class="mobile-form-privacy">–ù–∞–∂–∏–º–∞—è –∫–Ω–æ–ø–∫—É "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É", –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏.</p>
              </form>
            </div>
          </div>

          <!-- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –Ω–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å -->
          <div class="mobile-wizard-footer">
            <button class="mobile-footer-btn mobile-footer-prev" id="mobileFooterPrev" style="display: none;">
              –ù–∞–∑–∞–¥
            </button>
            <div class="mobile-footer-total">
              <span class="footer-total-label">–ò–¢–û–ì–û:</span>
              <span class="footer-total-value" id="mobileFooterTotal">0 ‚ÇΩ</span>
            </div>
            <button class="mobile-footer-btn mobile-footer-next" id="mobileFooterNext" style="display: none;">
              –î–∞–ª–µ–µ
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 6. FILMS SECTION -->
  <section class="films" id="films">
    <div class="films-background premium-bg-overlay-strong" data-speed="0.3">
      <div class="films-overlay"></div>
    </div>
    <div class="container">
      <h2 class="section-title">–ü—Ä–µ–º–∏–∞–ª—å–Ω—ã–µ –ø–ª–µ–Ω–∫–∏</h2>
      <p class="section-subtitle">–ó–∞—â–∏—Ç–∞ –∏ —Å—Ç–∏–ª—å –≤ –æ–¥–Ω–æ–º —Ä–µ—à–µ–Ω–∏–∏</p>
      <p class="films-description">–î–æ—Å—Ç—É–ø–Ω—ã —Ä–∞–∑–ª–∏—á–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–ª–µ–Ω–æ–∫, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ –≤—ã–±—Ä–∞—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é:</p>
      
      <div class="films-glass-container">
        <div class="films-glass-track" id="filmsGlassTrack">
          <div class="film-glass-item" data-film="quantum">
            <span class="film-glass-text">QUANTUM</span>
          </div>
          <div class="film-glass-item" data-film="llumar">
            <span class="film-glass-text">LLUMAR</span>
          </div>
          <div class="film-glass-item" data-film="krytex">
            <span class="film-glass-text">Krytex</span>
          </div>
          <div class="film-glass-item" data-film="monoppf">
            <span class="film-glass-text">MONOPPF</span>
          </div>
          <div class="film-glass-item" data-film="stek">
            <span class="film-glass-text">STEK</span>
          </div>
          <div class="film-glass-item" data-film="formulaone">
            <span class="film-glass-text">Formula one</span>
          </div>
        </div>
      </div>

      <div class="films-benefits">
        <p class="films-benefits-text">–í—ã–±–æ—Ä –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–ª–µ–Ω–æ–∫ –¥–ª—è –æ–∫–ª–µ–π–∫–∏ ‚Äì —ç—Ç–æ –ø–µ—Ä–≤—ã–π —à–∞–≥ –∫ —É–ª—É—á—à–µ–Ω–∏—é –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞ –≤–∞—à–µ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –∏ –µ–≥–æ –∑–∞—â–∏—Ç—ã. –ö–∞–∂–¥–∞—è –∏–∑ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø–ª–µ–Ω–æ–∫ –æ–±–ª–∞–¥–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏:</p>
        <div class="films-benefits-grid" id="filmsBenefitsGrid">
          <div class="films-benefit-item">
            <span class="films-benefit-icon">‚úì</span>
            <span>–ó–∞—â–∏—Ç–∞ –æ—Ç –£–§-–ª—É—á–µ–π</span>
          </div>
          <div class="films-benefit-item">
            <span class="films-benefit-icon">‚úì</span>
            <span>–¢–µ—Ä–º–æ—Ä–µ–≥—É–ª—è—Ü–∏—è</span>
          </div>
          <div class="films-benefit-item">
            <span class="films-benefit-icon">‚úì</span>
            <span>–ê–Ω—Ç–∏–±–ª–∏–∫–æ–≤–∞—è –∑–∞—â–∏—Ç–∞</span>
          </div>
          <div class="films-benefit-item">
            <span class="films-benefit-icon">‚úì</span>
            <span>–≠—Å—Ç–µ—Ç–∏–∫–∞ –∏ —Å—Ç–∏–ª—å</span>
          </div>
          <div class="films-benefit-item">
            <span class="films-benefit-icon">‚úì</span>
            <span>–ü—Ä–æ—á–Ω–æ—Å—Ç—å</span>
          </div>
          <div class="films-benefit-item">
            <span class="films-benefit-icon">‚úì</span>
            <span>–ú–∞—Ç–æ–≤—ã–µ –∏ –≥–ª—è–Ω—Ü–µ–≤—ã–µ —Ç–µ–∫—Å—Ç—É—Ä—ã</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 7. PROCESS SECTION -->
  <section class="process" id="process">
    <div class="container">
      <h2 class="section-title">–ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã</h2>
      <div class="process-steps-compact">
        <div class="process-step-compact" data-animate="fade-up">
          <div class="process-number-compact">01</div>
          <div class="process-content-compact">
            <h3>–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è</h3>
            <p>–û–±—Å—É–∂–¥–µ–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π –∏ –≤—ã–±–æ—Ä —Ä–µ—à–µ–Ω–∏—è</p>
          </div>
        </div>
        <div class="process-step-compact" data-animate="fade-up">
          <div class="process-number-compact">02</div>
          <div class="process-content-compact">
            <h3>–û—Å–º–æ—Ç—Ä</h3>
            <p>–û—Ü–µ–Ω–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫—É–∑–æ–≤–∞</p>
          </div>
        </div>
        <div class="process-step-compact" data-animate="fade-up">
          <div class="process-number-compact">03</div>
          <div class="process-content-compact">
            <h3>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞</h3>
            <p>–ú–æ–π–∫–∞ –∏ –æ–±–µ–∑–∂–∏—Ä–∏–≤–∞–Ω–∏–µ</p>
          </div>
        </div>
        <div class="process-step-compact" data-animate="fade-up">
          <div class="process-number-compact">04</div>
          <div class="process-content-compact">
            <h3>–û–∫–ª–µ–π–∫–∞</h3>
            <p>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞—â–∏—Ç–Ω–æ–π –ø–ª–µ–Ω–∫–∏</p>
          </div>
        </div>
        <div class="process-step-compact" data-animate="fade-up">
          <div class="process-number-compact">05</div>
          <div class="process-content-compact">
            <h3>–ö–æ–Ω—Ç—Ä–æ–ª—å</h3>
            <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞</p>
          </div>
        </div>
        <div class="process-step-compact" data-animate="fade-up">
          <div class="process-number-compact">06</div>
          <div class="process-content-compact">
            <h3>–í—ã–¥–∞—á–∞</h3>
            <p>–ü–µ—Ä–µ–¥–∞—á–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 8. PORTFOLIO / GALLERY SECTION -->
  <section class="portfolio" id="portfolio">
    <div class="container">
      <h2 class="section-title">–ù–∞—à–∏ —Ä–∞–±–æ—Ç—ã</h2>
      <div class="portfolio-gallery" id="portfolioGallery">
        <div class="portfolio-item tilt-3d" data-image="https://i.pinimg.com/736x/1c/9c/9a/1c9c9aff8afe692321467ca5f1d97f32.jpg" data-alt="–†–∞–±–æ—Ç–∞ 1">
          <img src="https://i.pinimg.com/736x/1c/9c/9a/1c9c9aff8afe692321467ca5f1d97f32.jpg" alt="–†–∞–±–æ—Ç–∞ 1" class="gallery-image gallery-image-processed premium-processed" loading="lazy" onerror="this.src='/public/images/portfolio/placeholder.jpg'; this.onerror=null;" />
        </div>
        <div class="portfolio-item tilt-3d" data-image="https://i.pinimg.com/1200x/5e/4c/e7/5e4ce70476d2dd1567d432680cc4462a.jpg" data-alt="–†–∞–±–æ—Ç–∞ 2">
          <img src="https://i.pinimg.com/1200x/5e/4c/e7/5e4ce70476d2dd1567d432680cc4462a.jpg" alt="–†–∞–±–æ—Ç–∞ 2" class="gallery-image gallery-image-processed premium-processed" loading="lazy" onerror="this.src='/public/images/portfolio/placeholder.jpg'; this.onerror=null;" />
        </div>
        <div class="portfolio-item tilt-3d" data-image="https://i.pinimg.com/736x/7c/c5/dd/7cc5ddc8d2833edc1ad6f3510c7df3d6.jpg" data-alt="–†–∞–±–æ—Ç–∞ 3">
          <img src="https://i.pinimg.com/736x/7c/c5/dd/7cc5ddc8d2833edc1ad6f3510c7df3d6.jpg" alt="–†–∞–±–æ—Ç–∞ 3" class="gallery-image gallery-image-processed premium-processed" loading="lazy" onerror="this.src='/public/images/portfolio/placeholder.jpg'; this.onerror=null;" />
        </div>
        <div class="portfolio-item tilt-3d" data-image="https://i.pinimg.com/736x/72/96/1b/72961bc9ff271e5c385c60aa58e22c4b.jpg" data-alt="–†–∞–±–æ—Ç–∞ 4">
          <img src="https://i.pinimg.com/736x/72/96/1b/72961bc9ff271e5c385c60aa58e22c4b.jpg" alt="–†–∞–±–æ—Ç–∞ 4" class="gallery-image gallery-image-processed premium-processed" loading="lazy" onerror="this.src='/public/images/portfolio/placeholder.jpg'; this.onerror=null;" />
        </div>
        <div class="portfolio-item tilt-3d" data-image="https://i.pinimg.com/736x/bb/92/82/bb9282a24a432e16a8362c5c62c8c2f8.jpg" data-alt="–†–∞–±–æ—Ç–∞ 5">
          <img src="https://i.pinimg.com/736x/bb/92/82/bb9282a24a432e16a8362c5c62c8c2f8.jpg" alt="–†–∞–±–æ—Ç–∞ 5" class="gallery-image gallery-image-processed premium-processed" loading="lazy" onerror="this.src='/public/images/portfolio/placeholder.jpg'; this.onerror=null;" />
        </div>
        <div class="portfolio-item tilt-3d" data-image="https://i.pinimg.com/736x/92/20/03/9220033bd92d57ab5a371f0bead58dbb.jpg" data-alt="–†–∞–±–æ—Ç–∞ 6">
          <img src="https://i.pinimg.com/736x/92/20/03/9220033bd92d57ab5a371f0bead58dbb.jpg" alt="–†–∞–±–æ—Ç–∞ 6" class="gallery-image gallery-image-processed premium-processed" loading="lazy" onerror="this.src='/public/images/portfolio/placeholder.jpg'; this.onerror=null;" />
        </div>
        <div class="portfolio-item tilt-3d" data-image="https://i.pinimg.com/736x/8c/c1/23/8cc12382dd904e89e24dfd9216f8180b.jpg" data-alt="–†–∞–±–æ—Ç–∞ 7">
          <img src="https://i.pinimg.com/736x/8c/c1/23/8cc12382dd904e89e24dfd9216f8180b.jpg" alt="–†–∞–±–æ—Ç–∞ 7" class="gallery-image gallery-image-processed premium-processed" loading="lazy" onerror="this.src='/public/images/portfolio/placeholder.jpg'; this.onerror=null;" />
        </div>
        <div class="portfolio-item tilt-3d" data-image="https://i.pinimg.com/736x/40/98/39/409839f150de67d23e274ebea1369bab.jpg" data-alt="–†–∞–±–æ—Ç–∞ 8">
          <img src="https://i.pinimg.com/736x/40/98/39/409839f150de67d23e274ebea1369bab.jpg" alt="–†–∞–±–æ—Ç–∞ 8" class="gallery-image gallery-image-processed premium-processed" loading="lazy" onerror="this.src='/public/images/portfolio/placeholder.jpg'; this.onerror=null;" />
        </div>
      </div>
      
      <!-- Lightbox Modal –¥–ª—è –≥–∞–ª–µ—Ä–µ–∏ -->
      <div id="portfolioLightbox" class="portfolio-lightbox" style="display: none;">
        <div class="lightbox-overlay" id="lightboxOverlay"></div>
        <button class="lightbox-close" id="lightboxClose" aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
        <button class="lightbox-prev" id="lightboxPrev" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">‚Äπ</button>
        <button class="lightbox-next" id="lightboxNext" aria-label="–°–ª–µ–¥—É—é—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">‚Ä∫</button>
        <div class="lightbox-content">
          <img id="lightboxImage" src="" alt="" />
          <div class="lightbox-caption" id="lightboxCaption"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- 9. TEASER VIDEO SECTION -->
  <section class="video-section" id="video">
    <!-- Desktop video - Rutube iframe -->
    <div class="video-background video-desktop" id="videoDesktopContainer">
      <div class="video-rutube-container" id="videoRutubeContainer" style="display: none;">
        <iframe 
          id="rutubeVideoFrame"
          src="https://rutube.ru/play/embed/081e1943d679395a563ac2325dd3e58b" 
          frameborder="0" 
          allow="clipboard-write; autoplay" 
          webkitAllowFullScreen 
          mozallowfullscreen 
          allowFullScreen
          style="width: 100%; height: 100%; min-height: 600px; border-radius: 12px;">
        </iframe>
      </div>
      <!-- Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤ -->
      <video id="desktopVideo" muted loop playsinline class="premium-processed" preload="metadata" webkit-playsinline style="display: none;">
        <source src="./public/images/video/teaser-desktop.mp4" type="video/mp4" />
        –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.
      </video>
    </div>
    <!-- Mobile video - Rutube iframe -->
    <div class="video-background video-mobile" id="videoMobileContainer">
      <div class="video-rutube-container-mobile">
        <iframe 
          src="https://rutube.ru/play/embed/081e1943d679395a563ac2325dd3e58b" 
          frameborder="0" 
          allow="clipboard-write; autoplay" 
          webkitAllowFullScreen 
          mozallowfullscreen 
          allowFullScreen
          style="width: 100%; height: 100%; min-height: 400px; border-radius: 12px;">
        </iframe>
      </div>
    </div>
    <div class="video-overlay premium-bg-overlay" id="videoOverlay"></div>
    <div class="video-content" id="videoContent">
      <h2 class="section-title">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∏–∑–º –≤ –¥–µ—Ç–∞–ª—è—Ö</h2>
      <p class="video-description">–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, –∫–∞–∫ –º—ã —Ä–∞–±–æ—Ç–∞–µ–º</p>
      <button class="btn btn-primary video-play-btn" id="videoPlayBtn" tabindex="0">–°–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ</button>
    </div>
  </section>

  <!-- 10. REVIEWS SECTION -->
  <section class="reviews" id="reviews">
    <div class="container">
      <h2 class="section-title">–û—Ç–∑—ã–≤—ã –∫–ª–∏–µ–Ω—Ç–æ–≤</h2>
      <div class="reviews-slider" id="reviewsSlider">
        <a href="https://yandex.by/maps/org/propellini/67952230417/reviews/?ll=37.448465%2C55.807461&utm_source=review&z=17" target="_blank" rel="noopener noreferrer" class="review-card review-card-link">
          <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <p class="review-text">"–û–∫–ª–µ–∏–≤–∞–ª–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫—É–∑–æ–≤ –∑–∞—â–∏—Ç–Ω–æ–π –ø–ª–µ–Ω–∫–æ–π. –†–∞–±–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –Ω–∞ –≤—ã—Å—à–µ–º —É—Ä–æ–≤–Ω–µ, –±–µ–∑ –µ–¥–∏–Ω–æ–≥–æ –ø—É–∑—ã—Ä—è. –ú–∞—Å—Ç–µ—Ä–∞ –æ—á–µ–Ω—å –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–µ, –≤—Å–µ –æ–±—ä—è—Å–Ω–∏–ª–∏ –ø–æ –ø—Ä–æ—Ü–µ—Å—Å—É. –ê–≤—Ç–æ–º–æ–±–∏–ª—å –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –Ω–æ–≤—ã–π!"</p>
          <div class="review-author">
            <strong>–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ú.</strong>
            <span>BMW X5</span>
          </div>
          <div class="review-link-hint">–ß–∏—Ç–∞—Ç—å –Ω–∞ –Ø–Ω–¥–µ–∫—Å ‚Üí</div>
        </a>
        <a href="https://yandex.by/maps/org/propellini/67952230417/reviews/?ll=37.448465%2C55.807461&utm_source=review&z=17" target="_blank" rel="noopener noreferrer" class="review-card review-card-link">
          <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <p class="review-text">"–û–±—Ä–∞—Ç–∏–ª—Å—è –≤ Propellini –ø–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏. –ù–µ –ø–æ–∂–∞–ª–µ–ª –Ω–∏ —Å–µ–∫—É–Ω–¥—ã! –ö–∞—á–µ—Å—Ç–≤–æ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –æ—Ç–ª–∏—á–Ω–æ–µ, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–¥–µ–∞–ª—å–Ω–∞—è. –ü—Ä–æ—à–ª–æ —É–∂–µ –ø–æ–ª–≥–æ–¥–∞ - –ø–ª–µ–Ω–∫–∞ –∫–∞–∫ –Ω–æ–≤–∞—è, –Ω–∏–∫–∞–∫–∏—Ö –¥–µ—Ñ–µ–∫—Ç–æ–≤."</p>
          <div class="review-author">
            <strong>–î–º–∏—Ç—Ä–∏–π –ö.</strong>
            <span>Mercedes-Benz S-Class</span>
          </div>
          <div class="review-link-hint">–ß–∏—Ç–∞—Ç—å –Ω–∞ –Ø–Ω–¥–µ–∫—Å ‚Üí</div>
        </a>
        <a href="https://yandex.by/maps/org/propellini/67952230417/reviews/?ll=37.448465%2C55.807461&utm_source=review&z=17" target="_blank" rel="noopener noreferrer" class="review-card review-card-link">
          <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <p class="review-text">"–ü—Ä–µ–º–∏—É–º —Å–µ—Ä–≤–∏—Å! –û—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –¥–æ –≥–æ—Ç–æ–≤–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ - –≤—Å–µ –Ω–∞ –≤—ã—Å–æ—Ç–µ. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –ø–ª–µ–Ω–∫—É Quantum, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–µ–≤–∑–æ—à–µ–ª –æ–∂–∏–¥–∞–Ω–∏—è. –°—Ç—É–¥–∏—è —á–∏—Å—Ç–∞—è, –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ. –†–µ–∫–æ–º–µ–Ω–¥—É—é!"</p>
          <div class="review-author">
            <strong>–ò–≥–æ—Ä—å –í.</strong>
            <span>Audi Q7</span>
          </div>
          <div class="review-link-hint">–ß–∏—Ç–∞—Ç—å –Ω–∞ –Ø–Ω–¥–µ–∫—Å ‚Üí</div>
        </a>
        <a href="https://yandex.by/maps/org/propellini/67952230417/reviews/?ll=37.448465%2C55.807461&utm_source=review&z=17" target="_blank" rel="noopener noreferrer" class="review-card review-card-link">
          <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <p class="review-text">"–û–∫–ª–µ–∏–≤–∞–ª–∏ –∫–∞–ø–æ—Ç –∏ –ø–µ—Ä–µ–¥–Ω–∏–µ –∫—Ä—ã–ª—å—è. –†–∞–±–æ—Ç–∞–ª–∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ, –≤—Å–µ –¥–µ—Ç–∞–ª–∏ –∑–∞—â–∏—Ç–∏–ª–∏. –ü–ª–µ–Ω–∫–∞ LLUMAR —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –±–µ–∑—É–ø—Ä–µ—á–Ω–æ. –¶–µ–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫–∞—á–µ—Å—Ç–≤—É. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–µ—Ä–Ω—É—Å—å –¥–ª—è –ø–æ–ª–Ω–æ–π –æ–∫–ª–µ–π–∫–∏."</p>
          <div class="review-author">
            <strong>–°–µ—Ä–≥–µ–π –ü.</strong>
            <span>Porsche 911</span>
          </div>
          <div class="review-link-hint">–ß–∏—Ç–∞—Ç—å –Ω–∞ –Ø–Ω–¥–µ–∫—Å ‚Üí</div>
        </a>
        <a href="https://yandex.by/maps/org/propellini/67952230417/reviews/?ll=37.448465%2C55.807461&utm_source=review&z=17" target="_blank" rel="noopener noreferrer" class="review-card review-card-link">
          <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <p class="review-text">"–õ—É—á—à–∞—è —Å—Ç—É–¥–∏—è –≤ –ú–æ—Å–∫–≤–µ! –ú–∞—Å—Ç–µ—Ä–∞ —Å –±–æ–ª—å—à–∏–º –æ–ø—ã—Ç–æ–º, —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ —Å –ø—Ä–µ–º–∏—É–º –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏. –û–∫–ª–µ–∏–ª–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫—É–∑–æ–≤, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ—Å—Ç–æ –ø–æ—Ç—Ä—è—Å–∞—é—â–∏–π. –ì–∞—Ä–∞–Ω—Ç–∏—è 10 –ª–µ—Ç - —ç—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –æ –∫–∞—á–µ—Å—Ç–≤–µ!"</p>
          <div class="review-author">
            <strong>–ú–∏—Ö–∞–∏–ª –†.</strong>
            <span>Range Rover</span>
          </div>
          <div class="review-link-hint">–ß–∏—Ç–∞—Ç—å –Ω–∞ –Ø–Ω–¥–µ–∫—Å ‚Üí</div>
        </a>
        <a href="https://yandex.by/maps/org/propellini/67952230417/reviews/?ll=37.448465%2C55.807461&utm_source=review&z=17" target="_blank" rel="noopener noreferrer" class="review-card review-card-link">
          <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <p class="review-text">"–û–∫–ª–µ–∏–≤–∞–ª–∏ –∑–∞—â–∏—Ç–Ω–æ–π –ø–ª–µ–Ω–∫–æ–π –≤–µ—Å—å –∫—É–∑–æ–≤. –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–Ω—è–ª 3 –¥–Ω—è, –Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ç–æ–≥–æ —Å—Ç–æ–∏–ª. –ù–∏–∫–∞–∫–∏—Ö –ø–æ–¥—Ä–µ–∑–æ–≤, –≤—Å–µ –∏–¥–µ–∞–ª—å–Ω–æ. –ü–ª–µ–Ω–∫–∞ STEK –ø—Ä–µ–º–∏—É–º –∫–∞—á–µ—Å—Ç–≤–∞. –°–ø–∞—Å–∏–±–æ –∫–æ–º–∞–Ω–¥–µ Propellini!"</p>
          <div class="review-author">
            <strong>–í–ª–∞–¥–∏–º–∏—Ä –°.</strong>
            <span>Lexus LX</span>
          </div>
          <div class="review-link-hint">–ß–∏—Ç–∞—Ç—å –Ω–∞ –Ø–Ω–¥–µ–∫—Å ‚Üí</div>
        </a>
        <a href="https://yandex.by/maps/org/propellini/67952230417/reviews/?ll=37.448465%2C55.807461&utm_source=review&z=17" target="_blank" rel="noopener noreferrer" class="review-card review-card-link">
          <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <p class="review-text">"–ó–∞–µ–∑–∂–∞–ª –Ω–∞ –æ–∫–ª–µ–π–∫—É –º–∞—à–∏–Ω—ã –∑–∞—â–∏—Ç–Ω–æ–π –ø–ª–µ–Ω–∫–æ–π. –û–∫–∞–∑–∞–Ω–Ω–æ–π —É—Å–ª—É–≥–æ–π –æ—Å—Ç–∞–ª—Å—è –¥–æ–≤–æ–ª–µ–Ω, —Ä–µ–±—è—Ç–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—ã —Å–≤–æ–µ–≥–æ –¥–µ–ª–∞. –†–∞–±–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ, –≤—Å–µ –¥–µ—Ç–∞–ª–∏ –Ω–∞ –º–µ—Å—Ç–µ. –ë—É–¥—É –∑–∞–µ–∑–∂–∞—Ç—å –∫ –Ω–∏–º –µ—â–µ, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é!"</p>
          <div class="review-author">
            <strong>–°–µ—Ä–≥–µ–π –ê.</strong>
            <span>BMW 5 Series</span>
          </div>
          <div class="review-link-hint">–ß–∏—Ç–∞—Ç—å –Ω–∞ –Ø–Ω–¥–µ–∫—Å ‚Üí</div>
        </a>
        <a href="https://yandex.by/maps/org/propellini/67952230417/reviews/?ll=37.448465%2C55.807461&utm_source=review&z=17" target="_blank" rel="noopener noreferrer" class="review-card review-card-link">
          <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <p class="review-text">"–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞! –û–∫–ª–µ–∏–ª–∏ –∑–æ–Ω—ã —Ä–∏—Å–∫–∞ –Ω–∞ –Ω–æ–≤–æ–º –∞–≤—Ç–æ–º–æ–±–∏–ª–µ. –ú–∞—Å—Ç–µ—Ä–∞ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–µ, –≤—Å–µ –æ–±—ä—è—Å–Ω–∏–ª–∏, –ø–æ–∫–∞–∑–∞–ª–∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã. –ü–ª–µ–Ω–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏–¥–µ–∞–ª—å–Ω–æ, –±–µ–∑ –µ–¥–∏–Ω–æ–≥–æ –¥–µ—Ñ–µ–∫—Ç–∞. –¶–µ–Ω—ã –∞–¥–µ–∫–≤–∞—Ç–Ω—ã–µ, –∫–∞—á–µ—Å—Ç–≤–æ –Ω–∞ –≤—ã—Å–æ—Ç–µ!"</p>
          <div class="review-author">
            <strong>–ê–Ω–¥—Ä–µ–π –ì.</strong>
            <span>Mercedes-Benz GLE</span>
          </div>
          <div class="review-link-hint">–ß–∏—Ç–∞—Ç—å –Ω–∞ –Ø–Ω–¥–µ–∫—Å ‚Üí</div>
        </a>
      </div>
    </div>
  </section>

  <!-- 11. OUR STUDIO SECTION -->
  <section class="studio studio-section-bg responsive-bg premium-bg-overlay premium-processed parallax-image" id="studio" data-speed="0.25" data-bg-desktop="/public/images/studio/studio-1.jpg" data-bg-mobile="/public/images/studio/studio-1.jpg">
    <div class="studio-overlay"></div>
    <div class="studio-haze"></div>
    <div class="container">
      <div class="studio-content" data-animate="fade-up">
        <h2 class="section-title">–ù–∞—à–∞ —Å—Ç—É–¥–∏—è</h2>
        <p class="studio-description">–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ, –ø—Ä–æ—Å—Ç–æ—Ä–Ω—ã–µ –±–æ–∫—Å—ã, –∏–¥–µ–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–º–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è–º–∏. PROPELLINI ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–µ—Ä–≤–∏—Å, —ç—Ç–æ –º–µ—Å—Ç–æ, –≥–¥–µ –≤–∞—à –∞–≤—Ç–æ–º–æ–±–∏–ª—å –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–µ–º–∏—É–º-–∑–∞—â–∏—Ç—É.</p>
        <div class="studio-gallery">
          <div class="studio-gallery-item">
            <div class="studio-gallery-image">
              <img src="https://propellini.ru/wp-content/uploads/2025/09/image_19_.webp" alt="–°—Ç—É–¥–∏—è Propellini" loading="lazy" onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'400\' height=\'300\'%3E%3Crect fill=\'%23ddd\' width=\'400\' height=\'300\'/%3E%3Ctext fill=\'%23999\' font-family=\'sans-serif\' font-size=\'20\' dy=\'10.5\' font-weight=\'bold\' x=\'50%25\' y=\'50%25\' text-anchor=\'middle\'%3E–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ%3C/text%3E%3C/svg%3E';" />
            </div>
            <div class="studio-gallery-text">
              <h5>–ü—Ä–æ—Å—Ç–æ—Ä–Ω—ã–µ –±–æ–∫—Å—ã</h5>
              <p>–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞ –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã</p>
            </div>
          </div>
          <div class="studio-gallery-item">
            <div class="studio-gallery-image">
              <img src="https://propellini.ru/wp-content/uploads/2025/09/5a7627dc3f7e0cf22e40e354b42f9b253f529b88.png" alt="–°—Ç—É–¥–∏—è Propellini" loading="lazy" onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'400\' height=\'300\'%3E%3Crect fill=\'%23ddd\' width=\'400\' height=\'300\'/%3E%3Ctext fill=\'%23999\' font-family=\'sans-serif\' font-size=\'20\' dy=\'10.5\' font-weight=\'bold\' x=\'50%25\' y=\'50%25\' text-anchor=\'middle\'%3E–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ%3C/text%3E%3C/svg%3E';" />
            </div>
            <div class="studio-gallery-text">
              <h5>–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</h5>
              <p>–ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ –ª—É—á—à–µ–µ</p>
            </div>
          </div>
          <div class="studio-gallery-item">
            <div class="studio-gallery-image">
              <img src="https://propellini.ru/wp-content/uploads/2025/09/image2-1.png" alt="–°—Ç—É–¥–∏—è Propellini" loading="lazy" onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'400\' height=\'300\'%3E%3Crect fill=\'%23ddd\' width=\'400\' height=\'300\'/%3E%3Ctext fill=\'%23999\' font-family=\'sans-serif\' font-size=\'20\' dy=\'10.5\' font-weight=\'bold\' x=\'50%25\' y=\'50%25\' text-anchor=\'middle\'%3E–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ%3C/text%3E%3C/svg%3E';" />
            </div>
            <div class="studio-gallery-text">
              <h5>–ò–¥–µ–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è</h5>
              <p>–ö–æ–Ω—Ç—Ä–æ–ª—å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –∏ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏</p>
            </div>
          </div>
          <div class="studio-gallery-item">
            <div class="studio-gallery-image">
              <img src="https://propellini.ru/wp-content/uploads/2025/09/image_20_.webp" alt="–°—Ç—É–¥–∏—è Propellini" loading="lazy" onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'400\' height=\'300\'%3E%3Crect fill=\'%23ddd\' width=\'400\' height=\'300\'/%3E%3Ctext fill=\'%23999\' font-family=\'sans-serif\' font-size=\'20\' dy=\'10.5\' font-weight=\'bold\' x=\'50%25\' y=\'50%25\' text-anchor=\'middle\'%3E–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ%3C/text%3E%3C/svg%3E';" />
            </div>
            <div class="studio-gallery-text">
              <h5>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–∞—Å—Ç–µ—Ä–∞</h5>
              <p>–û–ø—ã—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤</p>
            </div>
          </div>
          <div class="studio-gallery-item">
            <div class="studio-gallery-image">
              <img src="https://avatars.mds.yandex.net/get-altay/15437010/2a00000196c526a897764629a6cd0fea968a/XXXL" alt="–°—Ç—É–¥–∏—è Propellini" loading="lazy" onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'400\' height=\'300\'%3E%3Crect fill=\'%23ddd\' width=\'400\' height=\'300\'/%3E%3Ctext fill=\'%23999\' font-family=\'sans-serif\' font-size=\'20\' dy=\'10.5\' font-weight=\'bold\' x=\'50%25\' y=\'50%25\' text-anchor=\'middle\'%3E–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ%3C/text%3E%3C/svg%3E';" />
            </div>
            <div class="studio-gallery-text">
              <h5>–ü—Ä–µ–º–∏—É–º –º–∞—Ç–µ—Ä–∏–∞–ª—ã</h5>
              <p>–¢–æ–ª—å–∫–æ —Å–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–ª–µ–Ω–∫–∏</p>
            </div>
          </div>
          <div class="studio-gallery-item">
            <div class="studio-gallery-image">
              <img src="https://avatars.mds.yandex.net/get-altay/15081387/2a000001964a643d402c03031ca76c33fd2e/XXXL" alt="–°—Ç—É–¥–∏—è Propellini" loading="lazy" />
            </div>
            <div class="studio-gallery-text">
              <h5>–ì–∞—Ä–∞–Ω—Ç–∏—è –∫–∞—á–µ—Å—Ç–≤–∞</h5>
              <p>–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –≥–∞—Ä–∞–Ω—Ç–∏—è –Ω–∞ –≤—Å–µ —Ä–∞–±–æ—Ç—ã</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 12. CONTACTS SECTION -->
  <section class="contacts" id="contacts">
    <div class="container">
      <div class="contacts-header">
        <h2 class="section-title">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
        <p class="contacts-description">–í—ã –º–æ–∂–µ—Ç–µ –æ—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É –ø–æ —Ñ–æ—Ä–º–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –∏–ª–∏ —Å–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏ –ª—é–±—ã–º –¥—Ä—É–≥–∏–º —É–¥–æ–±–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º.</p>
      </div>
      
      <div class="contacts-grid">
        <div class="contacts-info">
          <h3 class="contacts-info-title">–¶–µ–Ω—Ç—Ä –æ–∫–ª–µ–π–∫–∏ –∑–∞—â–∏—Ç–Ω–æ–π –ø–ª–µ–Ω–∫–æ–π</h3>
          <div class="contacts-brand">Propellini</div>
          <div class="contacts-details">
            <div class="contact-detail-item">
              <strong>–ê–¥—Ä–µ—Å:</strong><br>
              –ú–æ—Å–∫–≤–∞, —É–ª. –ê–≤–∏–∞—Ü–∏–æ–Ω–Ω–∞—è, 79 –∫. 1
            </div>
            <div class="contact-detail-item">
              <strong>–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã:</strong><br>
              –ø–Ω-–≤—Å: —Å 8:00 –¥–æ 23:00
            </div>
            <div class="contact-detail-item">
              <strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong><br>
              <a href="tel:+79919361489" class="contact-phone">+7 (991) 936-14-89</a>
            </div>
            <div class="contacts-social">
              <a href="https://t.me/propellini_detailing" target="_blank" rel="noopener noreferrer" class="social-link">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69a.2.2 0 00-.05-.18c-.06-.05-.14-.03-.21-.02-.09.02-1.49.95-4.22 2.79-.4.27-.76.41-1.08.4-.36-.01-1.04-.2-1.55-.37-.63-.2-1.13-.31-1.09-.66.02-.18.27-.36.74-.55 2.92-1.27 4.86-2.11 5.83-2.51 2.78-1.16 3.35-1.36 3.73-1.36.08 0 .27.02.39.12.1.08.13.19.14.27-.01.06.01.24 0 .38z"/>
                </svg>
                Telegram
              </a>
              <a href="https://vk.com/propellini" target="_blank" rel="noopener noreferrer" class="social-link">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12.785 16.241s.336-.041.51-.25c.158-.192.153-.554.153-.554s-.023-1.526.687-1.754c.703-.221 1.604.981 2.562 1.416.724.329 1.274.256 1.274.256l2.559-.038s1.334-.085.7-1.139c-.052-.083-.373-.8-1.916-2.263-1.62-1.534-1.404-1.285.55-3.94.378-.516 1.059-1.354 1.059-1.354s.596-1.129.321-1.631c-.306-.568-.902-.619-.902-.619l-2.476.015s-.549.016-.896.344c-.182.176-.297.439-.297.439s-.534 1.422-1.24 2.633c-1.493 2.493-2.092 2.625-2.336 2.478-.569-.347-.427-1.394-.427-2.139 0-2.325.356-3.297-.695-3.547-.348-.084-.604-.14-1.496-.149-1.143-.012-2.106.004-2.654.28-.377.19-.668.614-.492.638.22.03.718.133.981.483.345.46.332 1.492.332 1.492s.198 2.93-.462 3.289c-.453.247-1.078-.257-2.423-2.633-.688-1.189-1.208-2.5-1.208-2.5s-.1-.32-.279-.492c-.216-.208-.517-.274-.517-.274l-2.345.015s-.78.035-1.067.335c-.257.267-.02.824-.02.824s3.293 7.743 7.014 11.656c3.415 3.607 7.307 3.367 7.307 3.367h1.741z"/>
                </svg>
                –í–ö–æ–Ω—Ç–∞–∫—Ç–µ
              </a>
              <a href="https://wa.me/79686648888" target="_blank" rel="noopener noreferrer" class="social-link">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                </svg>
                WhatsApp: +7 968 664-88-88
              </a>
            </div>
          </div>
        </div>
        
        <div class="contacts-form">
          <form id="contactForm" class="contact-form">
            <div class="form-group">
              <input type="text" id="contactName" name="name" required placeholder="–í–∞—à–µ –∏–º—è *" tabindex="0" />
            </div>
            <div class="form-group">
              <input type="tel" id="contactPhone" name="phone" required placeholder="–í–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω *" tabindex="0" />
            </div>
            <div class="form-group">
              <textarea id="contactMessage" name="message" rows="5" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" tabindex="0"></textarea>
            </div>
            <button type="submit" class="btn btn-primary" tabindex="0">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            <p class="form-privacy">–ù–∞–∂–∏–º–∞—è –∫–Ω–æ–ø–∫—É "–æ—Ç–ø—Ä–∞–≤–∏—Ç—å", –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏.</p>
          </form>
        </div>
      </div>
    </div>
  </section>

  <!-- 12.5. MAP SECTION -->
  <section class="map-section" id="map">
    <div class="container">
      <div class="map-container-full">
        <iframe 
          src="https://yandex.ru/map-widget/v1/?text=–ú–æ—Å–∫–≤–∞, —É–ª–∏—Ü–∞ –ê–≤–∏–∞—Ü–∏–æ–Ω–Ω–∞—è, 79, –∫–æ—Ä–ø—É—Å 1&z=18&ll=37.5173,55.8020&pt=37.5173,55.8020,pm2rdm&l=map" 
          width="100%" 
          height="100%" 
          frameborder="0" 
          allowfullscreen="true" 
          style="border:0; border-radius: 16px;"
          loading="lazy"
          title="–ö–∞—Ä—Ç–∞ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è Propellini –ø–æ –∞–¥—Ä–µ—Å—É –ú–æ—Å–∫–≤–∞, —É–ª. –ê–≤–∏–∞—Ü–∏–æ–Ω–Ω–∞—è, 79 –∫. 1"
          allow="geolocation"
        ></iframe>
      </div>
    </div>
  </section>

  <!-- 13. FOOTER -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-logo">
          <img src="public/logo/icon-black.png" alt="Propellini" class="footer-logo-icon" />
          <span class="footer-logo-text">PROPELLINI</span>
        </div>
        <nav class="footer-nav">
          <a href="#services" tabindex="0">–£—Å–ª—É–≥–∏</a>
          <a href="#reviews" tabindex="0">–û—Ç–∑—ã–≤—ã</a>
          <a href="#portfolio" tabindex="0">–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ</a>
          <a href="#contacts" tabindex="0">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
        </nav>
        <div class="footer-social">
          <a href="https://www.instagram.com/propellini_detailing" target="_blank" rel="noopener noreferrer" aria-label="Instagram" tabindex="0">Instagram</a>
          <a href="https://t.me/propellini_detailing" target="_blank" rel="noopener noreferrer" aria-label="Telegram" tabindex="0">Telegram</a>
          <a href="https://wa.me/79686648888" target="_blank" rel="noopener noreferrer" aria-label="WhatsApp" tabindex="0">WhatsApp</a>
          <a href="https://vk.com/propellini" target="_blank" rel="noopener noreferrer" aria-label="–í–ö–æ–Ω—Ç–∞–∫—Ç–µ" tabindex="0">–í–ö–æ–Ω—Ç–∞–∫—Ç–µ</a>
        </div>
      </div>
      <div class="footer-bottom">
        <p>¬© Propellini, 2025. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
      </div>
    </div>
  </footer>

  <!-- Order Modal -->
  <div id="orderModal" class="order-modal" style="display: none;">
    <div class="order-modal-overlay" id="orderModalOverlay"></div>
    <div class="order-modal-content">
      <button class="order-modal-close" id="orderModalClose" aria-label="–ó–∞–∫—Ä—ã—Ç—å" tabindex="0">&times;</button>
      <h2>–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –æ–∫–ª–µ–π–∫—É</h2>
      <form id="orderForm" class="order-form">
        <div class="order-form-group">
          <label for="orderName">–í–∞—à–µ –∏–º—è *</label>
          <input type="text" id="orderName" name="name" required placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" tabindex="0" />
        </div>
        <div class="order-form-group">
          <label for="orderPhone">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
          <input type="tel" id="orderPhone" name="phone" required placeholder="+7 (___) ___-__-__" tabindex="0" />
        </div>
        <div class="order-form-group">
          <label for="orderEmail">Email</label>
          <input type="email" id="orderEmail" name="email" placeholder="email@example.com" tabindex="0" />
        </div>
        <div class="order-form-group" style="display: none;">
          <label for="orderCar">–ê–≤—Ç–æ–º–æ–±–∏–ª—å</label>
          <input type="text" id="orderCar" name="car" readonly placeholder="–ù–µ –≤—ã–±—Ä–∞–Ω" tabindex="0" />
        </div>
        <div class="order-form-group" style="display: none;">
          <label for="orderZones">–í—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–æ–Ω—ã</label>
          <textarea id="orderZones" name="zones" readonly rows="3" placeholder="–ù–µ –≤—ã–±—Ä–∞–Ω—ã" tabindex="0"></textarea>
        </div>
        <div class="order-form-group" style="display: none;">
          <label for="orderTotal">–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å</label>
          <input type="text" id="orderTotal" name="total" readonly placeholder="0 ‚ÇΩ" tabindex="0" />
        </div>
        <div class="order-form-group">
          <label for="orderComment">–°–æ–æ–±—â–µ–Ω–∏–µ (–æ–ø–∏—Å–∞–Ω–∏–µ)</label>
          <textarea id="orderComment" name="comment" rows="3" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è" tabindex="0"></textarea>
        </div>
        <div class="order-form-actions">
          <button type="button" class="order-btn-cancel" id="orderCancel" tabindex="0">–û—Ç–º–µ–Ω–∞</button>
          <button type="submit" class="order-btn-submit" tabindex="0">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Discount Modal - —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–∫–∏–¥–∫–∏ -->
  <div id="discountModal" class="order-modal" style="display: none;">
    <div class="order-modal-overlay" id="discountModalOverlay"></div>
    <div class="order-modal-content">
      <button class="order-modal-close" id="discountModalClose" aria-label="–ó–∞–∫—Ä—ã—Ç—å" tabindex="0">&times;</button>
      <h2>–ü–æ–ª—É—á–∏—Ç—å —Å–∫–∏–¥–∫—É</h2>
      <form id="discountForm" class="order-form">
        <div class="order-form-group">
          <label for="discountPhone">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
          <input type="tel" id="discountPhone" name="phone" required placeholder="+7 (___) ___-__-__" tabindex="0" />
        </div>
        <div class="order-form-group">
          <label for="discountEmail">Email *</label>
          <input type="email" id="discountEmail" name="email" required placeholder="email@example.com" tabindex="0" />
        </div>
        <div class="order-form-group">
          <label for="discountMessage">–°–æ–æ–±—â–µ–Ω–∏–µ</label>
          <textarea id="discountMessage" name="message" rows="4" placeholder="–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ" tabindex="0"></textarea>
        </div>
        <div class="order-form-actions">
          <button type="button" class="order-btn-cancel" id="discountCancel" tabindex="0">–û—Ç–º–µ–Ω–∞</button>
          <button type="submit" class="order-btn-submit" tabindex="0">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
        </div>
      </form>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="src/utils/responsive-images.js"></script>
  <script src="script.js"></script>
  <script src="animations.js"></script>
  <script>
    // Calculator Toggle Functionality
    const handleCalculatorToggle = () => {
      const calculatorSection = document.getElementById('calculator');
      const calculatorNavBtn = document.getElementById('calculatorNavBtn');
      const calculatorCloseBtn = document.getElementById('calculatorCloseBtn');
      const body = document.body;

      // Open calculator
      const openCalculator = (e) => {
        if (e) e.preventDefault();
        calculatorSection.classList.add('active');
        body.style.overflow = 'hidden';
        calculatorSection.scrollTop = 0;
        
        // –ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–æ–±–∏–ª—å–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
        if (window.innerWidth <= 900) {
          setTimeout(() => {
            if (window.calculator && window.calculator.isMobile) {
              const wizard = document.querySelector('.mobile-wizard-new');
              if (wizard) {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–π —à–∞–≥
                const steps = wizard.querySelectorAll('.mobile-wizard-step');
                steps.forEach(step => step.classList.remove('active'));
                const firstStep = wizard.querySelector('.mobile-wizard-step[data-step="0"]');
                if (firstStep) {
                  firstStep.classList.add('active');
                }
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
                if (typeof initMobileCalculator === 'function') {
                  initMobileCalculator();
                }
              }
            }
          }, 100);
        }
      };

      // Close calculator
      const closeCalculator = (e) => {
        if (e) e.preventDefault();
        calculatorSection.classList.remove('active');
        body.style.overflow = '';
      };

      // Event listeners
      if (calculatorNavBtn) {
        calculatorNavBtn.addEventListener('click', openCalculator);
      }

      // Hero calculator button
      const heroCalculatorBtn = document.getElementById('heroCalculatorBtn');
      if (heroCalculatorBtn) {
        heroCalculatorBtn.addEventListener('click', openCalculator);
      }

      // All calculator open buttons
      // –ö–Ω–æ–ø–∫–∏ "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å" –æ—Ç–∫—Ä—ã–≤–∞—é—Ç –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
      const calculatorOpenBtns = document.querySelectorAll('.calculator-open-btn');
      calculatorOpenBtns.forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          // –û—Ç–∫—Ä—ã–≤–∞–µ–º –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
          openCalculator(e);
        });
      });

      if (calculatorCloseBtn) {
        calculatorCloseBtn.addEventListener('click', closeCalculator);
      }

      // Close on Escape key
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && calculatorSection.classList.contains('active')) {
          closeCalculator();
        }
      });

      // Close on click outside
      calculatorSection.addEventListener('click', (e) => {
        if (e.target === calculatorSection) {
          closeCalculator();
        }
      });
    };

    // Application Modal Toggle Functionality
    const handleApplicationModal = () => {
      const orderModal = document.getElementById('orderModal');
      const orderModalOverlay = document.getElementById('orderModalOverlay');
      const orderModalClose = document.getElementById('orderModalClose');
      const orderCancel = document.getElementById('orderCancel');
      const body = document.body;

      // Open application modal
      const openApplicationModal = (e) => {
        if (e) e.preventDefault();
        if (orderModal) {
          orderModal.style.display = 'flex';
          body.classList.add('no-scroll');
          
          // –ü—Ä–æ—Å—Ç–∞—è —Ñ–æ—Ä–º–∞ –∑–∞—è–≤–∫–∏ - –æ—á–∏—â–∞–µ–º –≤—Å–µ –ø–æ–ª—è –∫—Ä–æ–º–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö
          const orderName = document.getElementById('orderName');
          const orderPhone = document.getElementById('orderPhone');
          const orderEmail = document.getElementById('orderEmail');
          const orderComment = document.getElementById('orderComment');
            const orderCar = document.getElementById('orderCar');
            const orderZones = document.getElementById('orderZones');
          const orderTotal = document.getElementById('orderTotal');
          
          // –û—á–∏—â–∞–µ–º –≤—Å–µ –ø–æ–ª—è
          if (orderName) orderName.value = '';
          if (orderPhone) orderPhone.value = '';
          if (orderEmail) orderEmail.value = '';
          if (orderComment) orderComment.value = '';
          
          // –°–∫—Ä—ã–≤–∞–µ–º –∏ –æ—á–∏—â–∞–µ–º –ø–æ–ª—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ (–∞–≤—Ç–æ, –∑–æ–Ω—ã, —Å—Ç–æ–∏–º–æ—Å—Ç—å)
          if (orderCar) {
            orderCar.value = '';
            orderCar.parentElement.style.display = 'none';
          }
          if (orderZones) {
            orderZones.value = '';
            orderZones.parentElement.style.display = 'none';
          }
          if (orderTotal) {
            orderTotal.value = '';
            orderTotal.parentElement.style.display = 'none';
          }
          
          // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
          gsap.fromTo(orderModal, 
            { opacity: 0 }, 
            { opacity: 1, duration: 0.3, ease: 'power2.out' }
          );
        }
      };

      // Close application modal
      const closeApplicationModal = (e) => {
        if (e) e.preventDefault();
        if (orderModal) {
          gsap.to(orderModal, {
            opacity: 0,
            duration: 0.3,
            ease: 'power2.out',
            onComplete: () => {
              orderModal.style.display = 'none';
              body.classList.remove('no-scroll');
            }
          });
        }
      };

      // All application open buttons
      const applicationOpenBtns = document.querySelectorAll('.application-open-btn');
      applicationOpenBtns.forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          openApplicationModal(e);
        });
      });

      // Discount Modal Toggle Functionality
      const handleDiscountModal = () => {
        const discountModal = document.getElementById('discountModal');
        const discountModalOverlay = document.getElementById('discountModalOverlay');
        const discountModalClose = document.getElementById('discountModalClose');
        const discountCancel = document.getElementById('discountCancel');
        const body = document.body;

        // Open discount modal
        const openDiscountModal = (e) => {
          if (e) e.preventDefault();
          if (discountModal) {
            discountModal.style.display = 'flex';
            body.classList.add('no-scroll');
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
            gsap.fromTo(discountModal, 
              { opacity: 0 }, 
              { opacity: 1, duration: 0.3, ease: 'power2.out' }
            );
          }
        };

        // Close discount modal
        const closeDiscountModal = (e) => {
          if (e) e.preventDefault();
          if (discountModal) {
            gsap.to(discountModal, {
              opacity: 0,
              duration: 0.3,
              ease: 'power2.out',
              onComplete: () => {
                discountModal.style.display = 'none';
                body.classList.remove('no-scroll');
              }
            });
          }
        };

        // All discount open buttons
        // –ö–Ω–æ–ø–∫–∏ "–ü–æ–ª—É—á–∏—Ç—å —Å–∫–∏–¥–∫—É" —Ç–∞–∫–∂–µ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç –ø—Ä–æ—Å—Ç—É—é —Ñ–æ—Ä–º—É –∑–∞—è–≤–∫–∏
        const discountOpenBtns = document.querySelectorAll('.discount-open-btn');
        discountOpenBtns.forEach(btn => {
          btn.addEventListener('click', (e) => {
            e.preventDefault();
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø—Ä–æ—Å—Ç—É—é —Ñ–æ—Ä–º—É –∑–∞—è–≤–∫–∏
            openApplicationModal(e);
          });
        });

        // Close buttons
        if (discountModalClose) {
          discountModalClose.addEventListener('click', closeDiscountModal);
        }
        
        if (discountCancel) {
          discountCancel.addEventListener('click', closeDiscountModal);
        }

        if (discountModalOverlay) {
          discountModalOverlay.addEventListener('click', closeDiscountModal);
        }

        // Close on Escape key
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && discountModal && discountModal.style.display === 'flex') {
            closeDiscountModal();
          }
        });
      };

      // Initialize discount modal
      handleDiscountModal();

      // Close buttons
      if (orderModalClose) {
        orderModalClose.addEventListener('click', closeApplicationModal);
      }
      
      if (orderCancel) {
        orderCancel.addEventListener('click', closeApplicationModal);
      }

      if (orderModalOverlay) {
        orderModalOverlay.addEventListener('click', closeApplicationModal);
      }

      // Close on Escape key
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && orderModal && orderModal.style.display === 'flex') {
          closeApplicationModal();
        }
      });
    };

    // Video Play Button Handler - Rutube
    const handleVideoPlay = () => {
      const videoPlayBtn = document.getElementById('videoPlayBtn');
      const videoRutubeContainer = document.getElementById('videoRutubeContainer');
      const videoOverlay = document.getElementById('videoOverlay');
      const videoContent = document.getElementById('videoContent');
      
      if (!videoPlayBtn) {
        console.error('–ö–Ω–æ–ø–∫–∞ videoPlayBtn –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
        return;
      }
      
      // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É
      const handleVideoClick = (e) => {
        e.preventDefault();
        e.stopPropagation();
        console.log('–ö–Ω–æ–ø–∫–∞ –Ω–∞–∂–∞—Ç–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º Rutube –≤–∏–¥–µ–æ');
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–±–∏–ª—å–Ω–æ–µ –ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
        const isMobile = window.innerWidth <= 768;
        
        if (isMobile) {
          // –ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–±–∏–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
          const videoMobileContainer = document.getElementById('videoMobileContainer');
          if (videoMobileContainer) {
            videoMobileContainer.style.display = 'block';
            videoMobileContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
          }
          // –°–∫—Ä—ã–≤–∞–µ–º overlay –∏ –∫–æ–Ω—Ç–µ–Ω—Ç
          if (videoOverlay) videoOverlay.style.display = 'none';
          if (videoContent) videoContent.style.display = 'none';
          if (videoPlayBtn) videoPlayBtn.style.display = 'none';
          return;
        }
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º Rutube iframe –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞
        if (videoRutubeContainer) {
          videoRutubeContainer.style.display = 'block';
          videoRutubeContainer.style.zIndex = '1000';
        }
        
        // –°–∫—Ä—ã–≤–∞–µ–º overlay –∏ –∫–æ–Ω—Ç–µ–Ω—Ç —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
        if (videoOverlay && videoContent) {
          if (typeof gsap !== 'undefined') {
            gsap.to([videoOverlay, videoContent], {
              opacity: 0,
              duration: 0.5,
              ease: 'power2.out',
              onComplete: () => {
                if (videoOverlay) videoOverlay.style.display = 'none';
                if (videoContent) videoContent.style.display = 'none';
              }
            });
          } else {
            // Fallback –µ—Å–ª–∏ GSAP –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω
            videoOverlay.style.opacity = '0';
            videoContent.style.opacity = '0';
            setTimeout(() => {
              if (videoOverlay) videoOverlay.style.display = 'none';
              if (videoContent) videoContent.style.display = 'none';
            }, 500);
          }
        }
        
        // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
        if (videoPlayBtn) {
        videoPlayBtn.style.display = 'none';
        }
      };
      
      // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
      const newBtn = videoPlayBtn.cloneNode(true);
      videoPlayBtn.parentNode.replaceChild(newBtn, videoPlayBtn);
      const btn = newBtn;
      
      btn.addEventListener('click', handleVideoClick, true);
      btn.addEventListener('touchstart', handleVideoClick, { passive: false });
      btn.onclick = handleVideoClick;
    };

    // ============================================
    // –ù–û–í–´–ô –ü–†–ï–ú–ò–£–ú –ú–û–ë–ò–õ–¨–ù–´–ô –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†
    // ============================================
    const initMobileCalculator = () => {
      if (!window.calculator) {
        setTimeout(initMobileCalculator, 100);
        return;
      }

      const wizard = document.querySelector('.mobile-wizard-new');
      if (!wizard) return; // –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è - –ø—Ä–æ–ø—É—Å–∫–∞–µ–º

      const steps = wizard.querySelectorAll('.mobile-wizard-step');
      let currentStep = 0; // –ù–∞—á–∏–Ω–∞–µ–º —Å —à–∞–≥–∞ 0 (–≤—ã–±–æ—Ä –∫–ª–∞—Å—Å–∞)
      const totalSteps = 4;

      // –≠–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
      const footerPrev = document.getElementById('mobileFooterPrev');
      const footerNext = document.getElementById('mobileFooterNext');
      const footerTotal = document.getElementById('mobileFooterTotal');

      // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —à–∞–≥–∞ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
      const showStep = (stepNum, direction = 'next') => {
        steps.forEach((step, index) => {
          const stepNumber = parseInt(step.dataset.step);
          step.classList.remove('active', 'prev', 'next');
          
          if (stepNumber === stepNum) {
            step.classList.add('active', direction);
            setTimeout(() => step.classList.remove('prev', 'next'), 300);
          }
        });

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∞–º–∏
        if (footerPrev) {
          footerPrev.style.display = stepNum === 0 ? 'none' : 'flex';
        }
        if (footerNext) {
          footerNext.style.display = stepNum === totalSteps ? 'none' : 'flex';
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —à–∞–≥–∞
        initStep(stepNum);
        updateTotalPrice();
      };

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —à–∞–≥–∞
      const initStep = (stepNum) => {
        switch(stepNum) {
          case 0: initStep0(); break;
          case 1: initStep1(); break;
          case 2: initStep2(); break;
          case 3: initStep3(); break;
          case 4: initStep4(); break;
        }
      };
      
      // –®–∞–≥ 0: –í—ã–±–æ—Ä –∫–ª–∞—Å—Å–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è
      const initStep0 = () => {
        const classSelection = document.getElementById('mobileClassSelection');
        if (!classSelection || !window.calculator) return;
        
        const classes = [
          { id: 'small', name: '–ú–∞–ª—ã–π –∫–ª–∞—Å—Å' },
          { id: 'business', name: '–ë–∏–∑–Ω–µ—Å –∫–ª–∞—Å—Å / –ö—Ä–æ—Å—Å–æ–≤–µ—Ä—ã' },
          { id: 'suv-lux', name: '–í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫–∏ / –õ—é–∫—Å' },
          { id: 'pickup', name: '–ë–æ–ª—å—à–∏–µ –ø–∏–∫–∞–ø—ã' },
          { id: 'bus', name: '–ê–≤—Ç–æ–±—É—Å—ã / –ú–∏–Ω–∏–≤—ç–Ω—ã' }
        ];
        
        classSelection.innerHTML = classes.map(cls => `
          <button class="mobile-class-option ${window.calculator.selectedClass === cls.id ? 'active' : ''}" 
                  data-class="${cls.id}"
                  tabindex="0">
            <span class="mobile-class-name">${cls.name}</span>
          </button>
        `).join('');
        
        classSelection.querySelectorAll('.mobile-class-option').forEach(btn => {
          btn.addEventListener('click', () => {
            const classId = btn.dataset.class;
            if (window.calculator) {
              window.calculator.selectedClass = classId;
              window.calculator.selectedBrand = null;
              window.calculator.selectedModel = null;
              window.calculator.selectedZones.clear();
              
              // –û–±–Ω–æ–≤–ª—è–µ–º UI –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–Ω–æ–π –≤–µ—Ä—Å–∏–∏
              document.querySelectorAll('.class-option').forEach(b => b.classList.remove('active'));
              const desktopBtn = document.querySelector(`.class-option[data-class="${classId}"]`);
              if (desktopBtn) desktopBtn.classList.add('active');
              
              // –û–±–Ω–æ–≤–ª—è–µ–º –º–∞—Ä–∫–∏ –∏ –∑–æ–Ω—ã
              if (window.calculator.renderBrandChips) window.calculator.renderBrandChips();
              if (window.calculator.renderZones) window.calculator.renderZones();
              if (window.calculator.updateTotal) window.calculator.updateTotal();
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å
            classSelection.querySelectorAll('.mobile-class-option').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—É
            updateTotalPrice();
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —à–∞–≥ 1 (–≤—ã–±–æ—Ä –º–∞—Ä–∫–∏)
            setTimeout(() => {
              currentStep = 1;
              showStep(1, 'next');
            }, 300);
          });
        });
      };

      // –®–∞–≥ 1: –í—ã–±–æ—Ä –º–∞—Ä–∫–∏ (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ —á–∏–ø—Å—ã)
      const initStep1 = () => {
        const chipsContainer = document.getElementById('mobileBrandsChips');
        const searchInput = document.getElementById('mobileBrandSearch');
        if (!chipsContainer || !window.calculator) return;

        let searchQuery = '';
        let brandClickHandlers = [];

        const renderBrands = () => {
          let brands = window.calculator.getAllBrands();
          
          if (!brands || brands.length === 0) {
            chipsContainer.innerHTML = '<div class="mobile-chips-empty">–ú–∞—Ä–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
            return;
          }
          
          // –§–∏–ª—å—Ç—Ä—É–µ–º –ø–æ –ø–æ–∏—Å–∫—É, –µ—Å–ª–∏ –µ—Å—Ç—å
          if (searchQuery) {
            brands = brands.filter(b => 
              b.toLowerCase().includes(searchQuery.toLowerCase())
            );
          }

          if (brands.length === 0) {
            chipsContainer.innerHTML = '<div class="mobile-chips-empty">–ü–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
            return;
          }

          // –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
          brandClickHandlers.forEach(handler => {
            if (handler.element && handler.element.removeEventListener) {
              handler.element.removeEventListener('click', handler.fn);
            }
          });
          brandClickHandlers = [];

          chipsContainer.innerHTML = brands.map(brand => `
            <button class="mobile-chip ${window.calculator.selectedBrand === brand ? 'active' : ''}" 
                    data-brand="${brand}"
                    tabindex="0">
              ${brand}
            </button>
          `).join('');

          // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–∞ –Ω–∞ —á–∏–ø—Å—ã –º–∞—Ä–æ–∫
          chipsContainer.querySelectorAll('.mobile-chip').forEach(chip => {
            const handleBrandClick = () => {
              const brand = chip.dataset.brand;
              
              // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –º–∞—Ä–∫—É
              window.calculator.selectedBrand = brand;
              window.calculator.selectedModel = null;
              window.calculator.selectedZones.clear();
              
              // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π —á–∏–ø
              chipsContainer.querySelectorAll('.mobile-chip').forEach(c => c.classList.remove('active'));
              chip.classList.add('active');
              
              // –û—á–∏—â–∞–µ–º –ø–æ–∏—Å–∫
              if (searchInput) {
                searchInput.value = '';
                searchQuery = '';
              }
              
              // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—É
              updateTotalPrice();
              if (window.calculator && window.calculator.updateTotal) {
                window.calculator.updateTotal();
              }
              
              // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ–º –º–æ–¥–µ–ª–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —à–∞–≥ 2
              setTimeout(() => {
                currentStep = 2;
                showStep(2, 'next');
              }, 300);
            };
            
            chip.addEventListener('click', handleBrandClick);
            brandClickHandlers.push({ element: chip, fn: handleBrandClick });
          });
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ –º–∞—Ä–∫–∏
        renderBrands();

        // –ï—Å–ª–∏ –º–∞—Ä–∫–∞ —É–∂–µ –≤—ã–±—Ä–∞–Ω–∞, —Å—Ä–∞–∑—É —Ä–µ–Ω–¥–µ—Ä–∏–º –º–æ–¥–µ–ª–∏ (–¥–ª—è —Å–ª—É—á–∞—è, –∫–æ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ —à–∞–≥ 1)
        if (window.calculator && window.calculator.selectedBrand) {
          // –ù–µ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –Ω–æ –≥–æ—Ç–æ–≤–∏–º –¥–∞–Ω–Ω—ã–µ
        }

        // –ü–æ–∏—Å–∫ —Å debounce - —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —á–∏–ø—Å—ã
        if (searchInput) {
          let searchTimeout;
          searchInput.addEventListener('input', (e) => {
            clearTimeout(searchTimeout);
            searchQuery = e.target.value;
            searchTimeout = setTimeout(() => {
              renderBrands();
            }, 200);
          });
        }
      };

      // –®–∞–≥ 2: –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ —á–∏–ø—Å—ã) - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –º–∞—Ä–∫–∏
      const initStep2 = () => {
        const chipsContainer = document.getElementById('mobileModelsChips');
        const selectedBrandEl = document.getElementById('mobileSelectedBrand');
        const classBadge = document.getElementById('mobileClassBadge');
        const classNameEl = document.getElementById('mobileClassName');
        const searchInput = document.getElementById('mobileModelSearch');
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –º–∞—Ä–∫–∏ —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
        if (!chipsContainer || !window.calculator) {
          console.warn('–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∏–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–¥–µ–ª–µ–π –Ω–µ –Ω–∞–π–¥–µ–Ω');
          if (!window.calculator) {
            setTimeout(() => {
              if (window.calculator && !window.calculator.selectedBrand) {
                currentStep = 1;
                showStep(1);
              }
            }, 100);
          }
          return;
        }
        
        if (!window.calculator.selectedBrand) {
          console.warn('–ú–∞—Ä–∫–∞ –Ω–µ –≤—ã–±—Ä–∞–Ω–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ —à–∞–≥ 1');
          // –ï—Å–ª–∏ –Ω–µ—Ç –±—Ä–µ–Ω–¥–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ —à–∞–≥ 1
          setTimeout(() => {
          currentStep = 1;
          showStep(1);
          }, 100);
          return;
        }

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π –±—Ä–µ–Ω–¥
        if (selectedBrandEl) {
          selectedBrandEl.textContent = `–í—ã–±—Ä–∞–Ω–∞ –º–∞—Ä–∫–∞: ${window.calculator.selectedBrand}`;
        }

        let searchQuery = '';
        let modelClickHandlers = [];

        const renderModels = () => {
          // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –º–∞—Ä–∫–∏ –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º
          if (!window.calculator || !window.calculator.selectedBrand) {
            chipsContainer.innerHTML = '<div class="mobile-chips-empty">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –º–∞—Ä–∫—É</div>';
            return;
          }
          
          // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ–º –º–æ–¥–µ–ª–∏ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –º–∞—Ä–∫–∏
          let models = window.calculator.getAllModelsForBrand(window.calculator.selectedBrand);
          
          console.log(`–ù–∞–π–¥–µ–Ω–æ –º–æ–¥–µ–ª–µ–π –¥–ª—è –º–∞—Ä–∫–∏ ${window.calculator.selectedBrand}:`, models.length);
          
          if (!models || models.length === 0) {
            chipsContainer.innerHTML = '<div class="mobile-chips-empty">–ú–æ–¥–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –º–∞—Ä–∫–∏</div>';
            return;
          }
          
          // –§–∏–ª—å—Ç—Ä—É–µ–º –ø–æ –ø–æ–∏—Å–∫—É, –µ—Å–ª–∏ –µ—Å—Ç—å
          if (searchQuery) {
            models = models.filter(m => 
              m.toLowerCase().includes(searchQuery.toLowerCase())
            );
          }
          
          if (models.length === 0) {
            chipsContainer.innerHTML = '<div class="mobile-chips-empty">–ü–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
            return;
          }
          
          // –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
          modelClickHandlers.forEach(handler => {
            if (handler.element && handler.element.removeEventListener) {
              handler.element.removeEventListener('click', handler.fn);
            }
          });
          modelClickHandlers = [];
        
        chipsContainer.innerHTML = models.map(model => `
          <button class="mobile-chip ${window.calculator.selectedModel === model ? 'active' : ''}" 
                    data-model="${model}"
                    tabindex="0">
            ${model}
          </button>
        `).join('');

          // –ï—Å–ª–∏ –Ω–µ—Ç –º–æ–¥–µ–ª–µ–π, –Ω–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º
          if (models.length === 0) return;

          // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–∞ –Ω–∞ —á–∏–ø—Å—ã –º–æ–¥–µ–ª–µ–π
        chipsContainer.querySelectorAll('.mobile-chip').forEach(chip => {
            const handleModelClick = () => {
            const model = chip.dataset.model;
              
              // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –º–æ–¥–µ–ª—å
            window.calculator.selectModel(window.calculator.selectedBrand, model);
            window.calculator.selectedZones.clear();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π —á–∏–ø
            chipsContainer.querySelectorAll('.mobile-chip').forEach(c => c.classList.remove('active'));
            chip.classList.add('active');
            
              // –û—á–∏—â–∞–µ–º –ø–æ–∏—Å–∫
              if (searchInput) {
                searchInput.value = '';
                searchQuery = '';
              }
              
              // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–ª–∞—Å—Å –∞–≤—Ç–æ–º–æ–±–∏–ª—è
            if (classBadge && classNameEl && window.calculator.selectedClass) {
              const classNames = {
                'small': '–ú–∞–ª—ã–π –∫–ª–∞—Å—Å',
                'business': '–ë–∏–∑–Ω–µ—Å –∫–ª–∞—Å—Å / –ö—Ä–æ—Å—Å–æ–≤–µ—Ä—ã',
                'suv-lux': '–í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫–∏ / –õ—é–∫—Å',
                'pickup': '–ë–æ–ª—å—à–∏–µ –ø–∏–∫–∞–ø—ã',
                'bus': '–ê–≤—Ç–æ–±—É—Å—ã / –ú–∏–Ω–∏–≤—ç–Ω—ã'
              };
              classNameEl.textContent = classNames[window.calculator.selectedClass] || window.calculator.selectedClass;
              classBadge.style.display = 'flex';
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—É
            updateTotalPrice();
            if (window.calculator && window.calculator.updateTotal) {
              window.calculator.updateTotal();
            }
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —à–∞–≥ 3
            setTimeout(() => {
              currentStep = 3;
              showStep(3, 'next');
            }, 300);
            };
            
            chip.addEventListener('click', handleModelClick);
            modelClickHandlers.push({ element: chip, fn: handleModelClick });
          });
        };

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ–º –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–µ–ª–∏ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —à–∞–≥–∞ 2
        // –í—ã–∑—ã–≤–∞–µ–º —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π, —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –º–∞—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
        setTimeout(() => {
          renderModels();
        }, 100);

        // –ü–æ–∏—Å–∫ —Å debounce - —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —á–∏–ø—Å—ã –º–æ–¥–µ–ª–µ–π
        if (searchInput) {
          let searchTimeout;
          searchInput.addEventListener('input', (e) => {
            clearTimeout(searchTimeout);
            searchQuery = e.target.value;
            searchTimeout = setTimeout(() => {
              renderModels();
            }, 200);
          });
          
          // –û—á–∏—â–∞–µ–º –ø–æ–∏—Å–∫ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
          searchInput.value = '';
        }
      };

      // –®–∞–≥ 3: –í—ã–±–æ—Ä —É—Å–ª—É–≥–∏ (–ø–∞–∫–µ—Ç—ã –∏–ª–∏ –∑–æ–Ω—ã)
      const initStep3 = () => {
        const packagesSection = document.getElementById('mobilePackagesSection');
        const packagesGrid = document.getElementById('mobilePackagesGrid');
        const zonesSection = document.getElementById('mobileZonesSection');
        const zonesList = document.getElementById('mobileZonesList');
        const selectedCarEl = document.getElementById('mobileSelectedCar');
        
        if (!window.calculator || !window.calculator.selectedClass) {
          currentStep = 0;
          showStep(0);
          return;
        }

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å
        if (selectedCarEl) {
          const brand = window.calculator.selectedBrand || '';
          const model = window.calculator.selectedModel || '';
          selectedCarEl.textContent = `${brand} ${model}`.trim() || '–ù–µ –≤—ã–±—Ä–∞–Ω';
        }

        const classToUse = window.calculator.selectedClass;
        const zonesData = window.calculator.zonesDatabase[classToUse];
        
        if (!zonesData) return;

        // –†–µ–Ω–¥–µ—Ä–∏–º –ø–∞–∫–µ—Ç—ã
        if (packagesGrid && zonesData['–ü–∞–∫–µ—Ç—ã —É—Å–ª—É–≥']) {
          packagesGrid.innerHTML = zonesData['–ü–∞–∫–µ—Ç—ã —É—Å–ª—É–≥'].map(pkg => {
            const isSelected = window.calculator.selectedZones.has(pkg.id);
            return `
              <div class="mobile-package-card ${isSelected ? 'active' : ''}" data-package="${pkg.id}">
                <div class="mobile-package-name">${pkg.name}</div>
                <div class="mobile-package-price">${pkg.price.toLocaleString('ru-RU')} ‚ÇΩ</div>
              </div>
            `;
          }).join('');

          // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–∞–∫–µ—Ç–æ–≤
          packagesGrid.querySelectorAll('.mobile-package-card').forEach(card => {
            card.addEventListener('click', () => {
              const packageId = card.dataset.package;
              const selectedPackage = zonesData['–ü–∞–∫–µ—Ç—ã —É—Å–ª—É–≥'].find(p => p.id === packageId);
              
              if (!selectedPackage || !window.calculator) return;
              
              // –û—á–∏—â–∞–µ–º –≤—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–æ–Ω—ã
              window.calculator.selectedZones.clear();
              
              // –î–æ–±–∞–≤–ª—è–µ–º –ø–∞–∫–µ—Ç (—ç—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ü–µ–Ω—ã)
              window.calculator.selectedZones.add(packageId);
              window.calculator.selectedPackage = packageId;
              
              // –ü–æ–ª—É—á–∞–µ–º –∑–æ–Ω—ã –ø–∞–∫–µ—Ç–∞ —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é getPackageZones
              const packageZones = window.calculator.getPackageZones(packageId);
              
              // –î–æ–±–∞–≤–ª—è–µ–º –∑–æ–Ω—ã –ø–∞–∫–µ—Ç–∞ –≤ selectedZones —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
              // –ù–æ –≤ —Ä–∞—Å—á–µ—Ç–µ —Ü–µ–Ω—ã –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —Ü–µ–Ω–∞ –ø–∞–∫–µ—Ç–∞
              packageZones.forEach(zoneId => {
                window.calculator.selectedZones.add(zoneId);
              });
              
              // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—É —á–µ—Ä–µ–∑ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
              if (window.calculator.updateTotal) {
                window.calculator.updateTotal();
              }
              
              // –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤
              packagesGrid.querySelectorAll('.mobile-package-card').forEach(c => c.classList.remove('active'));
              card.classList.add('active');
              
              // –û–±–Ω–æ–≤–ª—è–µ–º —á–µ–∫–±–æ–∫—Å—ã –∑–æ–Ω - –ø–æ–º–µ—á–∞–µ–º –∑–æ–Ω—ã –ø–∞–∫–µ—Ç–∞ –∫–∞–∫ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∏ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –∏—Ö –æ–¥–Ω–∏–º —Ü–≤–µ—Ç–æ–º
              if (zonesList) {
                zonesList.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                  const zoneId = checkbox.value;
                  const item = checkbox.closest('.mobile-zone-item-new');
                  
                  if (packageZones.includes(zoneId)) {
                    checkbox.checked = true;
                    item?.classList.add('active', 'package-selected');
                    checkbox.disabled = true;
                  } else {
                    checkbox.checked = false;
                    item?.classList.remove('active', 'package-selected');
                    checkbox.disabled = false;
                  }
                });
              }
              
              // –†–∞—Å–∫—Ä—ã–≤–∞–µ–º –∑–æ–Ω—ã, –µ—Å–ª–∏ –æ–Ω–∏ –∑–∞–∫—Ä—ã—Ç—ã
              const zonesToggle = document.getElementById('mobileZonesToggle');
              const zonesListElement = document.getElementById('mobileZonesList');
              if (zonesToggle && zonesListElement && zonesListElement.style.display === 'none') {
                zonesToggle.click();
              }
              
              // –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –≤ –¥–µ—Å–∫—Ç–æ–ø–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
              if (window.calculator.updateCarZonesVisual) {
                window.calculator.updateCarZonesVisual();
              }
              
              // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—É
              setTimeout(() => {
                updateTotalPrice();
                if (window.calculator && window.calculator.updateTotal) {
                  window.calculator.updateTotal();
                }
              }, 50);
              
              // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –æ–∫–ª–µ–π–∫—É"
              const orderBtn = document.getElementById('mobileStep3OrderBtn');
              if (orderBtn) {
                orderBtn.style.display = 'block';
              }
            });
          });
        }

        // –†–µ–Ω–¥–µ—Ä–∏–º –∑–æ–Ω—ã
        if (zonesList) {
          let zonesHtml = '';
          Object.entries(zonesData).forEach(([category, zones]) => {
            if (category === '–ü–∞–∫–µ—Ç—ã —É—Å–ª—É–≥' || !Array.isArray(zones)) return;
            
            zones.forEach(zone => {
              if (zone.type === 'package') return;
              const isSelected = window.calculator.selectedZones.has(zone.id);
              // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –∑–æ–Ω–∞ —á–∞—Å—Ç—å—é –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞
              const isPackageZone = window.calculator.selectedPackage && 
                window.calculator.getPackageZones(window.calculator.selectedPackage).includes(zone.id);
              zonesHtml += `
                <label class="mobile-zone-item-new ${isSelected ? 'active' : ''} ${isPackageZone ? 'package-selected' : ''}">
                  <input type="checkbox" value="${zone.id}" ${isSelected ? 'checked' : ''} ${isPackageZone ? 'disabled' : ''}>
                  <span class="mobile-zone-name">${zone.name}</span>
                  <span class="mobile-zone-price-new">${zone.price.toLocaleString('ru-RU')} ‚ÇΩ</span>
                </label>
              `;
            });
          });
          
          zonesList.innerHTML = zonesHtml;

          // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–æ–Ω
          zonesList.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', (e) => {
              const zoneId = e.target.value;
              const item = e.target.closest('.mobile-zone-item-new');
              
              // –ï—Å–ª–∏ —á–µ–∫–±–æ–∫—Å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω (—á–∞—Å—Ç—å –ø–∞–∫–µ—Ç–∞), –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º
              if (checkbox.disabled) {
                e.preventDefault();
                checkbox.checked = true; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º checked
                return;
              }
              
              // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –∑–æ–Ω–∞, —Å–Ω–∏–º–∞–µ–º –ø–∞–∫–µ—Ç—ã
              if (e.target.checked) {
                // –£–¥–∞–ª—è–µ–º –≤—Å–µ –ø–∞–∫–µ—Ç—ã
                window.calculator.selectedPackage = null;
                if (zonesData['–ü–∞–∫–µ—Ç—ã —É—Å–ª—É–≥']) {
                  zonesData['–ü–∞–∫–µ—Ç—ã —É—Å–ª—É–≥'].forEach(pkg => {
                    window.calculator.selectedZones.delete(pkg.id);
                  });
                }
                if (packagesGrid) {
                  packagesGrid.querySelectorAll('.mobile-package-card').forEach(c => c.classList.remove('active'));
                }
                
                // –£–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É –ø–∞–∫–µ—Ç–∞ —Å–æ –≤—Å–µ—Ö –∑–æ–Ω
                zonesList.querySelectorAll('.mobile-zone-item-new').forEach(zoneItem => {
                  zoneItem.classList.remove('package-selected');
                  const zoneCheckbox = zoneItem.querySelector('input[type="checkbox"]');
                  if (zoneCheckbox) {
                    zoneCheckbox.disabled = false;
                  }
                });
                
                window.calculator.selectedZones.add(zoneId);
                item?.classList.add('active');
                item?.classList.remove('package-selected');
              } else {
                window.calculator.selectedZones.delete(zoneId);
                item?.classList.remove('active', 'package-selected');
              }
              
              // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –æ–∫–ª–µ–π–∫—É" –µ—Å–ª–∏ –µ—Å—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–æ–Ω—ã
              const orderBtn = document.getElementById('mobileStep3OrderBtn');
              if (orderBtn) {
                orderBtn.style.display = window.calculator.selectedZones.size > 0 ? 'block' : 'none';
              }
              
              // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—É –≤ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–µ
              updateTotalPrice();
              if (window.calculator && window.calculator.updateTotal) {
                window.calculator.updateTotal();
              }
              
            });
          });
          
          // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏-–≥–∞—Ä–º–æ—à–∫–∏ –∑–æ–Ω
          const zonesToggle = document.getElementById('mobileZonesToggle');
          if (zonesToggle) {
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —á–µ—Ä–µ–∑ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
            const newZonesToggle = zonesToggle.cloneNode(true);
            zonesToggle.parentNode.replaceChild(newZonesToggle, zonesToggle);
            
            newZonesToggle.addEventListener('click', () => {
              const zonesListElement = document.getElementById('mobileZonesList');
              if (zonesListElement) {
                const isHidden = zonesListElement.style.display === 'none' || !zonesListElement.style.display || zonesListElement.style.display === '';
                if (isHidden) {
                  zonesListElement.style.display = 'flex';
                  newZonesToggle.classList.add('active');
                } else {
                  zonesListElement.style.display = 'none';
                  newZonesToggle.classList.remove('active');
                }
              }
            });
          }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –æ–∫–ª–µ–π–∫—É" –Ω–∞ —à–∞–≥–µ 3
        // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω–æ–≤—ã—Ö
        const orderBtn = document.getElementById('mobileStep3OrderBtn');
        if (orderBtn) {
          // –ö–ª–æ–Ω–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Å—Ç–∞—Ä—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
          const newOrderBtn = orderBtn.cloneNode(true);
          orderBtn.parentNode.replaceChild(newOrderBtn, orderBtn);
          
          // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–Ω–æ–ø–∫—É
          const handleOrderClick = (e) => {
            e.preventDefault();
            e.stopPropagation();
            
            console.log('–ö–Ω–æ–ø–∫–∞ "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –æ–∫–ª–µ–π–∫—É" –Ω–∞–∂–∞—Ç–∞');
            console.log('–í—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–æ–Ω—ã:', Array.from(window.calculator?.selectedZones || []));
            
            if (window.calculator && window.calculator.selectedZones.size > 0) {
              console.log('–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —à–∞–≥ 4');
              
              // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –∑–∞—è–≤–∫–∏ —á–µ—Ä–µ–∑ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
              if (window.calculator.openCalculatorApplicationForm) {
                window.calculator.openCalculatorApplicationForm();
              } else {
                // –ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —à–∞–≥ 4
                currentStep = 4;
                showStep(4, 'next');
                setTimeout(() => {
                  initStep4();
                }, 350);
              }
            } else {
              console.warn('–ù–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∑–æ–Ω');
              alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É –∏–ª–∏ –∑–æ–Ω—É –æ–∫–ª–µ–π–∫–∏');
            }
          };
          
          // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
          newOrderBtn.addEventListener('click', handleOrderClick, true);
          newOrderBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            handleOrderClick(e);
          }, { passive: false });
          newOrderBtn.onclick = handleOrderClick;
        }
      };

      // –®–∞–≥ 4: –ò—Ç–æ–≥ –∏ —Ñ–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞
      const initStep4 = () => {
        const summaryBrand = document.getElementById('summaryBrand');
        const summaryModel = document.getElementById('summaryModel');
        const summaryClass = document.getElementById('summaryClass');
        const summaryService = document.getElementById('summaryService');
        const summaryTotal = document.getElementById('summaryTotal');
        
        if (!window.calculator) return;

        // –ó–∞–ø–æ–ª–Ω—è–µ–º –∏—Ç–æ–≥–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
        if (summaryBrand) {
          summaryBrand.textContent = window.calculator.selectedBrand || '‚Äî';
        }
        if (summaryModel) {
          summaryModel.textContent = window.calculator.selectedModel || '‚Äî';
        }
        if (summaryClass && window.calculator.selectedClass) {
          const classNames = {
            'small': '–ú–∞–ª—ã–π –∫–ª–∞—Å—Å',
            'business': '–ë–∏–∑–Ω–µ—Å –∫–ª–∞—Å—Å / –ö—Ä–æ—Å—Å–æ–≤–µ—Ä—ã',
            'suv-lux': '–í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫–∏ / –õ—é–∫—Å',
            'pickup': '–ë–æ–ª—å—à–∏–µ –ø–∏–∫–∞–ø—ã',
            'bus': '–ê–≤—Ç–æ–±—É—Å—ã / –ú–∏–Ω–∏–≤—ç–Ω—ã'
          };
          summaryClass.textContent = classNames[window.calculator.selectedClass] || window.calculator.selectedClass;
        }
        
        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é —É—Å–ª—É–≥—É
        if (summaryService) {
          const classToUse = window.calculator.selectedClass;
          const zonesData = window.calculator.zonesDatabase[classToUse];
          let serviceText = '‚Äî';
          
          if (zonesData && zonesData['–ü–∞–∫–µ—Ç—ã —É—Å–ª—É–≥']) {
            const selectedPackage = zonesData['–ü–∞–∫–µ—Ç—ã —É—Å–ª—É–≥'].find(pkg => 
              window.calculator.selectedZones.has(pkg.id)
            );
            if (selectedPackage) {
              serviceText = selectedPackage.name;
            } else {
              // –ü–µ—Ä–µ—á–∏—Å–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–æ–Ω—ã
              const allZones = Object.values(zonesData).flat();
              const selectedZonesNames = Array.from(window.calculator.selectedZones)
                .map(zoneId => {
                  const zone = allZones.find(z => z.id === zoneId);
                  return zone ? zone.name : null;
                })
                .filter(Boolean);
              serviceText = selectedZonesNames.length > 0 
                ? selectedZonesNames.join(', ') 
                : '‚Äî';
            }
          }
          summaryService.textContent = serviceText;
        }
        
        updateTotalPrice();
        if (summaryTotal) {
          summaryTotal.textContent = footerTotal?.textContent || '0 ‚ÇΩ';
        }

        // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª—è —Ñ–æ—Ä–º—ã –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
        const orderCarInput = document.getElementById('mobileOrderCar');
        const orderServicesInput = document.getElementById('mobileOrderServices');
        const orderTotalInput = document.getElementById('mobileOrderTotal');
        
        if (orderCarInput && window.calculator) {
          const brand = window.calculator.selectedBrand || '';
          const model = window.calculator.selectedModel || '';
          let carText = `${brand} ${model}`.trim() || '–ù–µ –≤—ã–±—Ä–∞–Ω';
          // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –µ—Å–ª–∏ –µ—Å—Ç—å
          if (window.calculator.selectedClass) {
            const classNames = {
              'small': '–ú–∞–ª—ã–π –∫–ª–∞—Å—Å',
              'business': '–ë–∏–∑–Ω–µ—Å –∫–ª–∞—Å—Å / –ö—Ä–æ—Å—Å–æ–≤–µ—Ä—ã',
              'suv-lux': '–í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫–∏ / –õ—é–∫—Å',
              'pickup': '–ë–æ–ª—å—à–∏–µ –ø–∏–∫–∞–ø—ã',
              'bus': '–ê–≤—Ç–æ–±—É—Å—ã / –ú–∏–Ω–∏–≤—ç–Ω—ã'
            };
            const className = classNames[window.calculator.selectedClass] || '';
            if (className) carText += ` (${className})`;
          }
          orderCarInput.value = carText;
        }

        // –ó–∞–ø–æ–ª–Ω—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏
        if (orderServicesInput && window.calculator) {
          const classToUse = window.calculator.selectedClass;
          const zonesData = window.calculator.zonesDatabase[classToUse];
          const selectedItems = [];
          
          if (zonesData) {
            const allZones = Object.values(zonesData).flat();
            const packages = zonesData['–ü–∞–∫–µ—Ç—ã —É—Å–ª—É–≥'] || [];
            
            // –°–Ω–∞—á–∞–ª–∞ —Å–æ–±–∏—Ä–∞–µ–º –ø–∞–∫–µ—Ç—ã
            const selectedPackages = Array.from(window.calculator.selectedZones)
              .filter(id => packages.some(p => p.id === id))
              .map(packageId => {
                const pkg = packages.find(p => p.id === packageId);
                return pkg ? pkg.name : null;
              })
              .filter(Boolean);
            
            selectedItems.push(...selectedPackages);
            
            // –ó–∞—Ç–µ–º —Å–æ–±–∏—Ä–∞–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–æ–Ω—ã (–Ω–µ –≤—Ö–æ–¥—è—â–∏–µ –≤ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã)
            const packageZoneIds = new Set();
            packages.forEach(pkg => {
              const pkgZones = window.calculator.getPackageZones(pkg.id);
              pkgZones.forEach(zoneId => packageZoneIds.add(zoneId));
            });
            
            const selectedZonesNames = Array.from(window.calculator.selectedZones)
              .map(zoneId => {
                if (packages.some(p => p.id === zoneId)) return null;
                if (packageZoneIds.has(zoneId)) return null;
                const zone = allZones.find(z => z.id === zoneId);
                return zone ? zone.name : null;
              })
              .filter(Boolean);
            
            selectedItems.push(...selectedZonesNames);
          }
          
          orderServicesInput.value = selectedItems.length > 0 
            ? selectedItems.join('\n') 
            : '–ù–µ –≤—ã–±—Ä–∞–Ω—ã';
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∏—Ç–æ–≥–æ–≤—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å
        if (orderTotalInput && window.calculator) {
          const total = window.calculator.calculateTotal();
          orderTotalInput.value = `${total.toLocaleString('ru-RU')} ‚ÇΩ`;
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ–æ—Ä–º—ã –∑–∞–∫–∞–∑–∞
        const orderForm = document.getElementById('mobileOrderForm');
        const submitBtn = document.getElementById('mobileOrderSubmitBtn');
        
        if (orderForm && submitBtn) {
          orderForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏
            submitBtn.disabled = true;
            submitBtn.textContent = '–û—Ç–ø—Ä–∞–≤–∫–∞...';
            
            const formData = {
              name: document.getElementById('mobileOrderName').value,
              phone: document.getElementById('mobileOrderPhone').value,
              email: document.getElementById('mobileOrderEmail').value,
              car: document.getElementById('mobileOrderCar').value,
              total: document.getElementById('mobileOrderTotal').value,
              services: document.getElementById('mobileOrderServices')?.value || summaryService?.textContent || '‚Äî',
              zones: summaryService?.textContent || '‚Äî',
              comment: document.getElementById('mobileOrderComment').value
            };

            try {
              // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä
              // const response = await fetch('/api/order', {
              //   method: 'POST',
              //   headers: { 'Content-Type': 'application/json' },
              //   body: JSON.stringify(formData)
              // });
              
              // –ü–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –ª–æ–≥–∏—Ä—É–µ–º
              console.log('–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–∫–∏:', formData);
              
              // –ò–º–∏—Ç–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏
              await new Promise(resolve => setTimeout(resolve, 1000));
              
              // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
              submitBtn.textContent = '‚úì –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!';
              submitBtn.style.background = 'rgba(34, 197, 94, 0.2)';
              submitBtn.style.borderColor = '#22c55e';
              submitBtn.style.color = '#22c55e';
              
              // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
              orderForm.reset();
              
              // –ß–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–Ω–æ–ø–∫—É –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
              setTimeout(() => {
                submitBtn.disabled = false;
                submitBtn.textContent = '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É';
                submitBtn.style.background = '';
                submitBtn.style.borderColor = '';
                submitBtn.style.color = '';
              }, 3000);
              
            } catch (error) {
              console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–∫–∏:', error);
              submitBtn.textContent = '–û—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞';
              submitBtn.style.background = 'rgba(239, 68, 68, 0.2)';
              submitBtn.style.borderColor = '#ef4444';
              submitBtn.style.color = '#ef4444';
              
              setTimeout(() => {
                submitBtn.disabled = false;
                submitBtn.textContent = '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É';
                submitBtn.style.background = '';
                submitBtn.style.borderColor = '';
                submitBtn.style.color = '';
              }, 3000);
            }
          });
        }
      };

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤–æ–π —Ü–µ–Ω—ã
      const updateTotalPrice = () => {
        if (!window.calculator || !footerTotal) return;

        let total = 0;
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π –∫–ª–∞—Å—Å –∏–ª–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –µ–≥–æ –∏–∑ –±—Ä–µ–Ω–¥–∞/–º–æ–¥–µ–ª–∏
        let classToUse = window.calculator.selectedClass;
        
        // –ï—Å–ª–∏ –∫–ª–∞—Å—Å –Ω–µ –≤—ã–±—Ä–∞–Ω, –Ω–æ –µ—Å—Ç—å –±—Ä–µ–Ω–¥ –∏ –º–æ–¥–µ–ª—å, –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–ª–∞—Å—Å
        if (!classToUse && window.calculator.selectedBrand && window.calculator.selectedModel) {
          classToUse = window.calculator.getCarClassByBrandAndModel(
            window.calculator.selectedBrand,
            window.calculator.selectedModel
          );
          if (classToUse) {
            window.calculator.selectedClass = classToUse;
          }
        }
        
        // –ï—Å–ª–∏ –∫–ª–∞—Å—Å–∞ –≤—Å—ë –µ—â—ë –Ω–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π
        if (!classToUse) {
          classToUse = 'small';
        }

        const zonesData = window.calculator.zonesDatabase[classToUse];
        if (!zonesData) {
          if (footerTotal) footerTotal.textContent = '0 ‚ÇΩ';
          const step3Total = document.getElementById('mobileStep3Total');
          if (step3Total) step3Total.textContent = '0 ‚ÇΩ';
          return;
        }

        const allZones = Object.values(zonesData).flat();
        const packages = zonesData['–ü–∞–∫–µ—Ç—ã —É—Å–ª—É–≥'] || [];
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–∞–∫–µ—Ç—ã - –Ω–∞—Ö–æ–¥–∏–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–∞–∫–µ—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å)
        let selectedPackage = null;
        packages.forEach(pkg => {
          if (window.calculator.selectedZones.has(pkg.id)) {
            selectedPackage = pkg;
            total = pkg.price;
          }
        });

        // –ï—Å–ª–∏ –µ—Å—Ç—å –ø–∞–∫–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ —Ü–µ–Ω—É –∏ –Ω–µ —Å—á–∏—Ç–∞–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–æ–Ω—ã
        // –ï—Å–ª–∏ –ø–∞–∫–µ—Ç–∞ –Ω–µ—Ç, —Å—á–∏—Ç–∞–µ–º —Ç–æ–ª—å–∫–æ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–æ–Ω—ã (–∏—Å–∫–ª—é—á–∞—è –∑–æ–Ω—ã –∏–∑ –ø–∞–∫–µ—Ç–æ–≤)
        if (!selectedPackage) {
          total = 0;
          const packageZoneIds = new Set();
          
          // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –∑–æ–Ω—ã –∏–∑ –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤
          packages.forEach(pkg => {
            const pkgZones = window.calculator.getPackageZones(pkg.id);
            pkgZones.forEach(zoneId => packageZoneIds.add(zoneId));
          });
          
          // –°—á–∏—Ç–∞–µ–º —Ç–æ–ª—å–∫–æ –∑–æ–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –≤—Ö–æ–¥—è—Ç –≤ –ø–∞–∫–µ—Ç—ã
          window.calculator.selectedZones.forEach(zoneId => {
            const zone = allZones.find(z => z.id === zoneId);
            // –£—á–∏—Ç—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –æ–±—ã—á–Ω—ã–µ –∑–æ–Ω—ã, –Ω–µ –ø–∞–∫–µ—Ç—ã –∏ –Ω–µ –∑–æ–Ω—ã –∏–∑ –ø–∞–∫–µ—Ç–æ–≤
            if (zone && zone.type !== 'package' && !packageZoneIds.has(zoneId)) {
              total += zone.price;
            }
          });
        }

        footerTotal.textContent = `${total.toLocaleString('ru-RU')} ‚ÇΩ`;
        
        // –¢–∞–∫–∂–µ –æ–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—É –Ω–∞ —à–∞–≥–µ 3, –µ—Å–ª–∏ –æ–Ω–∞ —Ç–∞–º –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
        const step3Total = document.getElementById('mobileStep3Total');
        if (step3Total) {
          step3Total.textContent = `${total.toLocaleString('ru-RU')} ‚ÇΩ`;
        }
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –æ–∫–ª–µ–π–∫—É" –µ—Å–ª–∏ —Ü–µ–Ω–∞ –±–æ–ª—å—à–µ 0 –∏ –º—ã –Ω–∞ —à–∞–≥–µ 3
        if (currentStep === 3 && total > 0) {
          const orderBtn = document.getElementById('mobileStep3OrderBtn');
          if (orderBtn) {
            orderBtn.style.display = 'block';
          }
        }
      };

      // –ù–∞–≤–∏–≥–∞—Ü–∏—è
      if (footerPrev) {
        footerPrev.addEventListener('click', () => {
          if (currentStep > 0) {
            currentStep--;
            showStep(currentStep, 'prev');
          }
        });
      }

      if (footerNext) {
        footerNext.addEventListener('click', () => {
          // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—Ö–æ–¥–∞
          let canProceed = false;
          
          switch(currentStep) {
            case 0:
              canProceed = !!window.calculator.selectedClass;
              break;
            case 1:
              canProceed = !!window.calculator.selectedBrand;
              break;
            case 2:
              canProceed = !!window.calculator.selectedModel;
              break;
            case 3:
              canProceed = window.calculator.selectedZones.size > 0;
              break;
            case 4:
              canProceed = true; // –ò—Ç–æ–≥ - –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ
              break;
          }

          if (canProceed && currentStep < totalSteps) {
            currentStep++;
            showStep(currentStep, 'next');
          }
        });
      }


      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
      const calculatorSection = document.getElementById('calculator');
      if (calculatorSection) {
        const observer = new MutationObserver(() => {
          if (calculatorSection.classList.contains('active')) {
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—ã–±–æ—Ä –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
            if (window.calculator) {
              window.calculator.selectedBrand = null;
              window.calculator.selectedModel = null;
              window.calculator.selectedClass = null;
              window.calculator.selectedZones.clear();
            }
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–∏—Å–∫
            const brandSearch = document.getElementById('mobileBrandSearch');
            const modelSearch = document.getElementById('mobileModelSearch');
            if (brandSearch) brandSearch.value = '';
            if (modelSearch) modelSearch.value = '';
            
            // –°–∫—Ä—ã–≤–∞–µ–º –±–µ–π–¥–∂ –∫–ª–∞—Å—Å–∞
            const classBadge = document.getElementById('mobileClassBadge');
            if (classBadge) classBadge.style.display = 'none';
            
            currentStep = 1;
            showStep(1);
          }
        });
        
        observer.observe(calculatorSection, {
          attributes: true,
          attributeFilter: ['class']
        });
      }

      // –ù–∞—á–∞–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
      showStep(1);
    };

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ñ–æ—Ä–º—ã –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
    const handleCalculatorForm = () => {
      const calculatorForm = document.getElementById('calculatorOrderForm');
      const calculatorFormClose = document.getElementById('calculatorFormClose');
      const calcOrderCancel = document.getElementById('calcOrderCancel');
      const calculatorFormContainer = document.getElementById('calculatorApplicationForm');
      
      // –ó–∞–∫—Ä—ã—Ç–∏–µ —Ñ–æ—Ä–º—ã
      const closeCalculatorForm = (e) => {
        if (e) {
          e.preventDefault();
          e.stopPropagation();
        }
        if (calculatorFormContainer) {
          calculatorFormContainer.classList.remove('active');
          calculatorFormContainer.style.display = 'none';
          calculatorFormContainer.style.visibility = 'hidden';
          calculatorFormContainer.style.opacity = '0';
          document.body.style.overflow = '';
        }
        if (window.calculator && window.calculator.closeCalculatorApplicationForm) {
          window.calculator.closeCalculatorApplicationForm();
        }
      };
      
      // –ü—Ä–∏–≤—è–∑–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è
      if (calculatorFormClose) {
        // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
        const newCloseBtn = calculatorFormClose.cloneNode(true);
        calculatorFormClose.parentNode.replaceChild(newCloseBtn, calculatorFormClose);
        
        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
        newCloseBtn.addEventListener('click', closeCalculatorForm, true);
        newCloseBtn.addEventListener('touchstart', closeCalculatorForm, { passive: false });
        newCloseBtn.onclick = closeCalculatorForm;
        console.log('–ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è —Ñ–æ—Ä–º—ã –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –ø—Ä–∏–≤—è–∑–∞–Ω–∞');
      }
      
      if (calcOrderCancel) {
        calcOrderCancel.addEventListener('click', closeCalculatorForm, true);
        calcOrderCancel.addEventListener('touchstart', closeCalculatorForm, { passive: false });
        calcOrderCancel.onclick = closeCalculatorForm;
      }
      
      // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ Escape
      const handleEscape = (e) => {
        if (e.key === 'Escape' && calculatorFormContainer && calculatorFormContainer.classList.contains('active')) {
          closeCalculatorForm(e);
        }
      };
      document.addEventListener('keydown', handleEscape);
      
      // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –Ω–∞ overlay
      if (calculatorFormContainer) {
        calculatorFormContainer.addEventListener('click', (e) => {
          if (e.target === calculatorFormContainer) {
            closeCalculatorForm(e);
          }
        }, true);
      }
      
      // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
      if (calculatorForm) {
        calculatorForm.addEventListener('submit', async (e) => {
          e.preventDefault();
          
          const formData = {
            name: document.getElementById('calcOrderName').value,
            phone: document.getElementById('calcOrderPhone').value,
            email: document.getElementById('calcOrderEmail').value,
            car: document.getElementById('calcOrderCar').value,
            services: document.getElementById('calcOrderServices').value,
            total: document.getElementById('calcOrderTotal').value,
            comment: document.getElementById('calcOrderComment').value
          };
          
          const submitBtn = calculatorForm.querySelector('button[type="submit"]');
          const originalText = submitBtn?.textContent;
          
          if (submitBtn) {
            submitBtn.disabled = true;
            submitBtn.textContent = '–û—Ç–ø—Ä–∞–≤–∫–∞...';
          }
          
          try {
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä
            // const response = await fetch('/api/order', {
            //   method: 'POST',
            //   headers: { 'Content-Type': 'application/json' },
            //   body: JSON.stringify(formData)
            // });
            
            console.log('–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–∫–∏ –∏–∑ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞:', formData);
            
            // –ò–º–∏—Ç–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
            if (submitBtn) {
              submitBtn.textContent = '‚úì –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!';
              submitBtn.style.background = 'rgba(34, 197, 94, 0.2)';
              submitBtn.style.borderColor = '#22c55e';
              submitBtn.style.color = '#22c55e';
            }
            
            // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
            calculatorForm.reset();
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
              closeCalculatorForm();
              if (submitBtn) {
                submitBtn.disabled = false;
                submitBtn.textContent = originalText || '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É';
                submitBtn.style.background = '';
                submitBtn.style.borderColor = '';
                submitBtn.style.color = '';
              }
            }, 2000);
            
          } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–∫–∏:', error);
            if (submitBtn) {
              submitBtn.disabled = false;
              submitBtn.textContent = originalText || '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É';
              alert('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.');
            }
          }
        });
      }
    };

    // Handle navigation menu toggle
    const handleNavToggle = () => {
      const navToggle = document.getElementById('navToggle');
      const navMenu = document.getElementById('navMenu');
      const body = document.body;

      if (!navToggle || !navMenu) return;

      const toggleMenu = (e) => {
        if (e) e.preventDefault();
        e?.stopPropagation();
        
        navMenu.classList.toggle('active');
        navToggle.classList.toggle('active');
        
        if (navMenu.classList.contains('active')) {
          body.style.overflow = 'hidden';
        } else {
          body.style.overflow = '';
        }
      };

      navToggle.addEventListener('click', toggleMenu);
      navToggle.addEventListener('touchstart', toggleMenu, { passive: false });
      
      // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
      const closeMenuOnOutsideClick = (e) => {
        if (navMenu.classList.contains('active') && 
            !navMenu.contains(e.target) && 
            !navToggle.contains(e.target)) {
          navMenu.classList.remove('active');
          navToggle.classList.remove('active');
          body.style.overflow = '';
        }
      };
      
      // –ò—Å–ø–æ–ª—å–∑—É–µ–º capture —Ñ–∞–∑—É –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã
      document.addEventListener('click', closeMenuOnOutsideClick, true);

      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞ –∫ —Ü–µ–ª–∏ (–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –∑–∞—Ä–∞–Ω–µ–µ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö)
      const scrollToTarget = (target) => {
        // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é –µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–æ
        if (navMenu && navMenu.classList.contains('active')) {
          navMenu.classList.remove('active');
          if (navToggle) navToggle.classList.remove('active');
          body.style.overflow = '';
        }
        
        // –ó–∞–∫—Ä—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–∞
        const calcForm = document.getElementById('calculatorApplicationForm');
        if (calcForm && calcForm.classList.contains('active')) {
          if (window.calculator && window.calculator.closeCalculatorApplicationForm) {
            window.calculator.closeCalculatorApplicationForm();
          }
        }
        
        // –í—ã—á–∏—Å–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é —Å —É—á–µ—Ç–æ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
        const navHeight = document.querySelector('.main-nav')?.offsetHeight || 0;
        const targetPosition = target.getBoundingClientRect().top + window.pageYOffset - navHeight - 20;
        
        // –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞
        window.scrollTo({
          top: targetPosition,
          behavior: 'smooth'
        });
      };

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Å—Å—ã–ª–æ–∫ –≤ –º–µ–Ω—é
      navMenu.querySelectorAll('a').forEach(link => {
        // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –µ—Å–ª–∏ –µ—Å—Ç—å
        const newLink = link.cloneNode(true);
        link.parentNode.replaceChild(newLink, link);
        
        newLink.addEventListener('click', (e) => {
          e.stopPropagation(); // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–ø–ª—ã—Ç–∏–µ
          
          // –î–ª—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ - –æ—Ç–∫—Ä—ã–≤–∞–µ–º –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∏ –∑–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é
          if (newLink.id === 'calculatorNavBtn') {
            e.preventDefault();
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é
            navMenu.classList.remove('active');
            navToggle.classList.remove('active');
            body.style.overflow = '';
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
            setTimeout(() => {
              const calculatorSection = document.getElementById('calculator');
              if (calculatorSection) {
                calculatorSection.classList.add('active');
                body.style.overflow = 'hidden';
                calculatorSection.scrollTop = 0;
              }
            }, 300);
            return;
          }
          
          // –î–ª—è –æ–±—ã—á–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ - –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ, –º–µ–Ω—é –∏ –¥–µ–ª–∞–µ–º –ø–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª
          const href = newLink.getAttribute('href');
          if (href && href !== '#' && href.startsWith('#')) {
            e.preventDefault();
            const targetElement = document.querySelector(href);
            if (targetElement) {
              // –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ –µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–æ
              const lightbox = document.getElementById('portfolioLightbox');
              if (lightbox && (lightbox.style.display === 'flex' || lightbox.style.display === 'block')) {
                const closeBtn = document.getElementById('lightboxClose');
                if (closeBtn && window.lightboxCloseBtn) {
                  window.lightboxCloseBtn.click();
                }
                // –ñ–¥–µ–º –∑–∞–∫—Ä—ã—Ç–∏—è –ø–µ—Ä–µ–¥ —Å–∫—Ä–æ–ª–ª–æ–º
                setTimeout(() => {
                  scrollToTarget(targetElement);
                }, 300);
              } else {
                scrollToTarget(targetElement);
              }
            }
          } else {
            // –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ –∑–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é
            navMenu.classList.remove('active');
            navToggle.classList.remove('active');
            body.style.overflow = '';
          }
        }, false);
        });
      };

    // Quick "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è" button with 5-second timer
    const initQuickOrderButton = () => {
      // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É, –µ—Å–ª–∏ –µ—ë –µ—â–µ –Ω–µ—Ç
      let quickOrderBtn = document.getElementById('quickOrderBtn');
      
      if (!quickOrderBtn) {
        quickOrderBtn = document.createElement('button');
        quickOrderBtn.id = 'quickOrderBtn';
        quickOrderBtn.className = 'quick-order-btn';
        // SVG –∏–∫–æ–Ω–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞ –≤–º–µ—Å—Ç–æ —Ç–µ–∫—Å—Ç–∞
        quickOrderBtn.innerHTML = `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M22 6L12 13L2 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>`;
        quickOrderBtn.setAttribute('aria-label', '–ë—ã—Å—Ç—Ä–∞—è –∑–∞–ø–∏—Å—å –Ω–∞ –æ–∫–ª–µ–π–∫—É');
        quickOrderBtn.setAttribute('tabindex', '0');
        document.body.appendChild(quickOrderBtn);
      }

      let lastClickTime = 0;
      const COOLDOWN_TIME = 5000; // 5 —Å–µ–∫—É–Ω–¥

      const handleQuickOrder = (e) => {
        e.preventDefault();
        e.stopPropagation();
        
        const currentTime = Date.now();
        const timeSinceLastClick = currentTime - lastClickTime;

        if (timeSinceLastClick < COOLDOWN_TIME) {
          return;
        }

        lastClickTime = currentTime;
        
        // –û—Ç–∫—Ä—ã–≤–∞–µ–º –ü–†–û–°–¢–£–Æ —Ñ–æ—Ä–º—É –∑–∞—è–≤–∫–∏ (–±–µ–∑ –∞–≤—Ç–æ –∏ —Ü–µ–Ω—ã)
        const orderModal = document.getElementById('orderModal');
        if (orderModal) {
          orderModal.style.display = 'flex';
          document.body.classList.add('no-scroll');
          
          if (typeof gsap !== 'undefined') {
            gsap.fromTo(orderModal, 
              { opacity: 0 }, 
              { opacity: 1, duration: 0.3, ease: 'power2.out' }
            );
          }
          
          // –ù–ï –∑–∞–ø–æ–ª–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ - —ç—Ç–æ –ø—Ä–æ—Å—Ç–∞—è —Ñ–æ—Ä–º–∞
          // –û—á–∏—â–∞–µ–º –ø–æ–ª—è –∞–≤—Ç–æ–º–æ–±–∏–ª—è –∏ —Ü–µ–Ω—ã, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å, –∏ —Å–∫—Ä—ã–≤–∞–µ–º –∏—Ö
          const orderTotal = document.getElementById('orderTotal');
          const orderCar = document.getElementById('orderCar');
          const orderZones = document.getElementById('orderZones');
          const orderName = document.getElementById('orderName');
          const orderPhone = document.getElementById('orderPhone');
          const orderEmail = document.getElementById('orderEmail');
          const orderComment = document.getElementById('orderComment');
          
          // –û—á–∏—â–∞–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è
          if (orderName) orderName.value = '';
          if (orderPhone) orderPhone.value = '';
          if (orderEmail) orderEmail.value = '';
          if (orderComment) orderComment.value = '';
          
          // –û—á–∏—â–∞–µ–º –∏ —Å–∫—Ä—ã–≤–∞–µ–º –ø–æ–ª—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
          if (orderTotal) {
            orderTotal.value = '';
            orderTotal.parentElement.style.display = 'none';
          }
          if (orderCar) {
            orderCar.value = '';
            orderCar.parentElement.style.display = 'none';
          }
          if (orderZones) {
            orderZones.value = '';
            orderZones.parentElement.style.display = 'none';
          }
        }
        
        // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –Ω–∞ 5 —Å–µ–∫—É–Ω–¥
        quickOrderBtn.disabled = true;
        quickOrderBtn.classList.add('disabled');
        
        let countdown = 5;
        const countdownInterval = setInterval(() => {
          countdown--;
          if (countdown <= 0) {
            clearInterval(countdownInterval);
            quickOrderBtn.disabled = false;
            quickOrderBtn.classList.remove('disabled');
          }
        }, 1000);
      };

      quickOrderBtn.addEventListener('click', handleQuickOrder);
      quickOrderBtn.addEventListener('touchstart', handleQuickOrder, { passive: false });
    };

    // –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –¥–ª—è –≤—Å–µ—Ö —è–∫–æ—Ä–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
    const handleSmoothScroll = () => {
      // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫ —Å —è–∫–æ—Ä—è–º–∏
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          const href = this.getAttribute('href');
          
          // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É—Å—Ç—ã–µ —è–∫–æ—Ä—è –∏ —è–∫–æ—Ä—è –¥–ª—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ (–æ–Ω–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ)
          if (href === '#' || href === '#calculator' || this.id === 'calculatorNavBtn') {
            return;
          }
          
          const target = document.querySelector(href);
          if (target) {
            e.preventDefault();
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ –µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–æ
            const lightbox = document.getElementById('portfolioLightbox');
            if (lightbox && (lightbox.style.display === 'flex' || lightbox.style.display === 'block')) {
              const closeBtn = document.getElementById('lightboxClose');
              if (closeBtn && window.lightboxCloseBtn) {
                window.lightboxCloseBtn.click();
              }
              // –ñ–¥–µ–º –∑–∞–∫—Ä—ã—Ç–∏—è –ø–µ—Ä–µ–¥ —Å–∫—Ä–æ–ª–ª–æ–º
              setTimeout(() => {
                if (typeof scrollToTarget === 'function') {
                  scrollToTarget(target);
            } else {
                  // Fallback –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
                  const navHeight = document.querySelector('.main-nav')?.offsetHeight || 0;
                  const targetPosition = target.getBoundingClientRect().top + window.pageYOffset - navHeight - 20;
                  window.scrollTo({ top: targetPosition, behavior: 'smooth' });
                }
              }, 300);
              return;
            }
            
            if (typeof scrollToTarget === 'function') {
              scrollToTarget(target);
              } else {
              // Fallback –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
              const navHeight = document.querySelector('.main-nav')?.offsetHeight || 0;
              const targetPosition = target.getBoundingClientRect().top + window.pageYOffset - navHeight - 20;
              window.scrollTo({ top: targetPosition, behavior: 'smooth' });
              }
            }
          });
        });
      
      };

    // Lightbox –¥–ª—è –≥–∞–ª–µ—Ä–µ–∏ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ
    const handlePortfolioLightbox = () => {
      const lightbox = document.getElementById('portfolioLightbox');
      const lightboxImage = document.getElementById('lightboxImage');
      const lightboxCaption = document.getElementById('lightboxCaption');
      const lightboxClose = document.getElementById('lightboxClose');
      const lightboxOverlay = document.getElementById('lightboxOverlay');
      const lightboxPrev = document.getElementById('lightboxPrev');
      const lightboxNext = document.getElementById('lightboxNext');
      const portfolioItems = document.querySelectorAll('.portfolio-item[data-image]');
      
      if (!lightbox || !lightboxImage) return;
      
      let currentIndex = 0;
      const images = Array.from(portfolioItems).map(item => ({
        src: item.dataset.image,
        alt: item.dataset.alt || item.querySelector('img')?.alt || ''
      }));
      
      const openLightbox = (index) => {
        if (index < 0 || index >= images.length) return;
        
        currentIndex = index;
        lightboxImage.src = images[index].src;
        lightboxImage.alt = images[index].alt || `–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ ${index + 1}`;
        lightboxCaption.textContent = images[index].alt || '';
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–∑–∏—Ü–∏—é —Å–∫—Ä–æ–ª–ª–∞ –ø–µ—Ä–µ–¥ –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π
        const scrollY = window.scrollY || window.pageYOffset || document.documentElement.scrollTop;
        document.body.dataset.scrollY = scrollY.toString();
        
        // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ - –ø–æ–ª–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–∫—Ä–æ–ª–ª–∞
        if (window.innerWidth <= 768) {
          document.body.style.position = 'fixed';
          document.body.style.top = `-${scrollY}px`;
          document.body.style.width = '100%';
          document.body.style.overflow = 'hidden';
          document.body.style.height = '100%';
          document.documentElement.style.overflow = 'hidden';
          document.body.style.touchAction = 'none';
          document.documentElement.style.touchAction = 'none';
        } else {
          // –î–ª—è –¥–µ—Å–∫—Ç–æ–ø–Ω–æ–π –≤–µ—Ä—Å–∏–∏ —Ç–æ–ª—å–∫–æ –±–ª–æ–∫–∏—Ä—É–µ–º —Å–∫—Ä–æ–ª–ª body, –Ω–æ —Ä–∞–∑—Ä–µ—à–∞–µ–º –≤ lightbox
          document.body.style.overflow = 'hidden';
          document.documentElement.style.overflow = 'hidden';
        }
        
        lightbox.style.display = 'flex';
        lightbox.style.visibility = 'visible';
        
        // –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –∫–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –≤–∏–¥–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
        const closeBtn = document.getElementById('lightboxClose') || window.lightboxCloseBtn;
        if (closeBtn) {
          closeBtn.style.display = 'flex';
          closeBtn.style.visibility = 'visible';
          closeBtn.style.opacity = '1';
          closeBtn.style.zIndex = '10003';
          closeBtn.style.pointerEvents = 'auto';
          closeBtn.style.cursor = 'pointer';
        }
        
        // –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏
        setTimeout(() => {
          bindCloseButton();
          // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ø—Ä–∏–≤—è–∑–∫–∞
          const currentCloseBtn = document.getElementById('lightboxClose');
          if (currentCloseBtn && window.lightboxCloseBtn) {
            // –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –∫–Ω–æ–ø–∫–∞ –≤–∏–¥–Ω–∞ –∏ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞
            currentCloseBtn.style.display = 'flex';
            currentCloseBtn.style.visibility = 'visible';
            currentCloseBtn.style.opacity = '1';
            currentCloseBtn.style.pointerEvents = 'auto';
            currentCloseBtn.style.cursor = 'pointer';
          }
        }, 50);
        
        // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
        if (typeof gsap !== 'undefined') {
          gsap.fromTo(lightbox, 
            { opacity: 0 }, 
            { opacity: 1, duration: 0.3, ease: 'power2.out' }
          );
          gsap.fromTo(lightboxImage, 
            { scale: 0.8, opacity: 0 }, 
            { scale: 1, opacity: 1, duration: 0.4, ease: 'power2.out', delay: 0.1 }
          );
          if (closeBtn) {
            gsap.fromTo(closeBtn, 
              { opacity: 0, scale: 0.8 }, 
              { opacity: 1, scale: 1, duration: 0.3, ease: 'power2.out', delay: 0.2 }
            );
          }
        } else {
          if (closeBtn) {
            closeBtn.style.opacity = '1';
          }
        }
      };
      
      const closeLightbox = () => {
        console.log('–ó–∞–∫—Ä—ã–≤–∞–µ–º lightbox');
        
        // –°—Ä–∞–∑—É —Å–∫—Ä—ã–≤–∞–µ–º lightbox
        lightbox.style.display = 'none';
        lightbox.style.visibility = 'hidden';
        lightbox.style.opacity = '0';
        
        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–∫—Ä–æ–ª–ª
        const scrollY = parseInt(document.body.dataset.scrollY || '0', 10);
        
        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –≤—Å–µ—Ö –≤–µ—Ä—Å–∏–π
        document.body.style.position = '';
        document.body.style.top = '';
        document.body.style.width = '';
        document.body.style.overflow = '';
        document.body.style.height = '';
        document.body.style.touchAction = '';
        document.documentElement.style.overflow = '';
        document.documentElement.style.touchAction = '';
        
        // –£–¥–∞–ª—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é –ø–æ–∑–∏—Ü–∏—é
        delete document.body.dataset.scrollY;
        
        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é —Å–∫—Ä–æ–ª–ª–∞
        if (scrollY > 0) {
          setTimeout(() => {
            window.scrollTo({
              top: scrollY,
              behavior: 'instant'
            });
          }, 10);
        }
        
        // –§–æ–∫—É—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–∫—Ä—ã–ª lightbox
        if (document.activeElement && document.activeElement.blur) {
          document.activeElement.blur();
        }
        
        console.log('Lightbox –∑–∞–∫—Ä—ã—Ç, —Å–∫—Ä–æ–ª–ª –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω');
      };
      
      const showNext = () => {
        const nextIndex = (currentIndex + 1) % images.length;
        openLightbox(nextIndex);
      };
      
      const showPrev = () => {
        const prevIndex = (currentIndex - 1 + images.length) % images.length;
        openLightbox(prevIndex);
      };
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–æ–≤ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
      portfolioItems.forEach((item, index) => {
        item.style.cursor = 'pointer';
        
        // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
        const newItem = item.cloneNode(true);
        item.parentNode.replaceChild(newItem, item);
        const portfolioItem = newItem;
        
        const handleClick = (e) => {
          e.preventDefault();
          e.stopPropagation();
          openLightbox(index);
        };
        
        portfolioItem.addEventListener('click', handleClick, true);
        portfolioItem.addEventListener('touchstart', handleClick, { passive: false });
        
        // –¢–∞–∫–∂–µ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏
        const img = portfolioItem.querySelector('img');
        if (img) {
          img.style.pointerEvents = 'none';
          // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
          img.addEventListener('error', function() {
            console.warn('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–æ—Å—å:', this.src);
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥–ª—É—à–∫—É –∏–ª–∏ —Å–∫—Ä—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç
            this.style.display = 'none';
            const placeholder = document.createElement('div');
            placeholder.className = 'image-placeholder';
            placeholder.innerHTML = '<span>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–æ</span>';
            placeholder.style.cssText = 'width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: rgba(255,255,255,0.1); border-radius: 8px; color: rgba(255,255,255,0.5);';
            if (this.parentNode) {
              this.parentNode.appendChild(placeholder);
          }
        });
      }
      });
      
      // –ó–∞–∫—Ä—ã—Ç–∏–µ - —É–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
      const handleCloseClick = (e) => {
        if (e) {
          e.preventDefault();
          e.stopPropagation();
          e.stopImmediatePropagation();
        }
        console.log('–ó–∞–∫—Ä—ã–≤–∞–µ–º lightbox —á–µ—Ä–µ–∑ handleCloseClick');
        closeLightbox();
        return false;
      };
      
      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∫ –∫–Ω–æ–ø–∫–µ –∑–∞–∫—Ä—ã—Ç–∏—è
      const bindCloseButton = () => {
        const currentCloseBtn = document.getElementById('lightboxClose');
        if (currentCloseBtn) {
          // –£–¥–∞–ª—è–µ–º –≤—Å–µ —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —á–µ—Ä–µ–∑ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
          const newCloseBtn = currentCloseBtn.cloneNode(true);
          currentCloseBtn.parentNode.replaceChild(newCloseBtn, currentCloseBtn);
          
          // –ü—Ä–æ—Å—Ç–æ–π –∏ –Ω–∞–¥–µ–∂–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
          const handleClose = (e) => {
            if (e) {
              e.preventDefault();
              e.stopPropagation();
              e.stopImmediatePropagation();
            }
            console.log('–ó–∞–∫—Ä—ã–≤–∞–µ–º lightbox —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É');
            closeLightbox();
            return false;
          };
          
          // –î–æ–±–∞–≤–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
          newCloseBtn.addEventListener('click', handleClose, true);
          newCloseBtn.addEventListener('click', handleClose, false);
          newCloseBtn.addEventListener('mousedown', handleClose, true);
          
          // Touch –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
          newCloseBtn.addEventListener('touchstart', handleClose, { passive: false });
          newCloseBtn.addEventListener('touchend', handleClose, { passive: false });
          
          // –ü—Ä—è–º–æ–π onclick –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
          newCloseBtn.onclick = handleClose;
          
          // –ò—Å–ø–æ–ª—å–∑—É–µ–º data-–∞—Ç—Ä–∏–±—É—Ç –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
          newCloseBtn.setAttribute('data-lightbox-close', 'true');
          
          // –î–æ–±–∞–≤–ª—è–µ–º —Ç–∞–∫–∂–µ –ø—Ä—è–º–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç
          newCloseBtn.style.cursor = 'pointer';
          newCloseBtn.style.pointerEvents = 'auto';
          newCloseBtn.style.zIndex = '1000001';
          newCloseBtn.style.display = 'flex';
          newCloseBtn.style.visibility = 'visible';
          newCloseBtn.style.opacity = '1';
          newCloseBtn.setAttribute('role', 'button');
          newCloseBtn.setAttribute('tabindex', '0');
          newCloseBtn.setAttribute('aria-label', '–ó–∞–∫—Ä—ã—Ç—å');
          
          // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫—É –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
          window.lightboxCloseBtn = newCloseBtn;
          
          console.log('–ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è lightbox –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ');
            } else {
          console.warn('–ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è lightbox –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!');
        }
      };
      
      // –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å—Ä–∞–∑—É
      bindCloseButton();
      
      // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º openLightbox –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏
      const originalOpen = openLightbox;
      openLightbox = function(index) {
        originalOpen.call(this, index);
        // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏
                setTimeout(() => {
          bindCloseButton();
        }, 150);
        // –¢–∞–∫–∂–µ –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ–º –µ—â–µ —Ä–∞–∑ –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
        setTimeout(() => {
          bindCloseButton();
                }, 500);
      };
      
      // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –Ω–∞ overlay –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è
      if (lightboxOverlay) {
        // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
        const newOverlay = lightboxOverlay.cloneNode(true);
        lightboxOverlay.parentNode.replaceChild(newOverlay, lightboxOverlay);
        const overlay = newOverlay;
        
        const handleOverlayClose = (e) => {
          // –ó–∞–∫—Ä—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫–ª–∏–∫ –∏–º–µ–Ω–Ω–æ –Ω–∞ overlay, –∞ –Ω–µ –Ω–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
          if (e.target === overlay || e.target === lightbox) {
            e.preventDefault();
            e.stopPropagation();
            closeLightbox();
            return false;
          }
        };
        
        overlay.addEventListener('click', handleOverlayClose, true);
        overlay.addEventListener('touchend', handleOverlayClose, { passive: false });
        overlay.style.cursor = 'pointer';
        
        // –¢–∞–∫–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–ª–∏–∫ –Ω–∞ —Å–∞–º lightbox (–Ω–æ –Ω–µ –Ω–∞ content)
        if (lightbox) {
          const handleLightboxClose = (e) => {
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –µ—Å–ª–∏ –∫–ª–∏–∫ –Ω–∞ —Å–∞–º lightbox, –Ω–æ –Ω–µ –Ω–∞ content –∏–ª–∏ –µ–≥–æ –¥–µ—Ç–µ–π
            const lightboxContent = document.querySelector('.lightbox-content');
            if (e.target === lightbox || (e.target === lightboxOverlay && lightboxOverlay)) {
              if (!lightboxContent || !lightboxContent.contains(e.target)) {
                e.preventDefault();
                e.stopPropagation();
                console.log('–ó–∞–∫—Ä—ã–≤–∞–µ–º lightbox —á–µ—Ä–µ–∑ –∫–ª–∏–∫ –ø–æ overlay');
                closeLightbox();
              }
            }
          };
          lightbox.addEventListener('click', handleLightboxClose, true);
          
          // –¢–∞–∫–∂–µ –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞ overlay –æ—Ç–¥–µ–ª—å–Ω–æ
          if (lightboxOverlay) {
            lightboxOverlay.addEventListener('click', (e) => {
              e.preventDefault();
              e.stopPropagation();
              console.log('–ó–∞–∫—Ä—ã–≤–∞–µ–º lightbox —á–µ—Ä–µ–∑ –∫–ª–∏–∫ –ø–æ overlay');
              closeLightbox();
            }, true);
          }
        }
      }
      
      // –ù–∞–≤–∏–≥–∞—Ü–∏—è
      if (lightboxNext) {
        lightboxNext.addEventListener('click', (e) => {
          e.stopPropagation();
          showNext();
        });
      }
      if (lightboxPrev) {
        lightboxPrev.addEventListener('click', (e) => {
          e.stopPropagation();
          showPrev();
        });
      }
      
      // –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è - —É–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
      const handleKeyDown = (e) => {
        const lightboxElement = document.getElementById('portfolioLightbox');
        if (!lightboxElement) return;
        
        const isOpen = lightboxElement.style.display === 'flex' || 
                      lightboxElement.style.display === 'block' ||
                      window.getComputedStyle(lightboxElement).display !== 'none';
        
        if (isOpen) {
          if (e.key === 'Escape' || e.keyCode === 27) {
            e.preventDefault();
            e.stopPropagation();
            e.stopImmediatePropagation();
            console.log('–ó–∞–∫—Ä—ã–≤–∞–µ–º lightbox —á–µ—Ä–µ–∑ Escape');
            closeLightbox();
            return false;
          } else if (e.key === 'ArrowRight' || e.keyCode === 39) {
            e.preventDefault();
            e.stopPropagation();
            showNext();
          } else if (e.key === 'ArrowLeft' || e.keyCode === 37) {
            e.preventDefault();
            e.stopPropagation();
            showPrev();
          }
        }
      };
      
      // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å capture —Ñ–∞–∑–æ–π –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
      document.addEventListener('keydown', handleKeyDown, true);
      
      // –¢–∞–∫–∂–µ –¥–æ–±–∞–≤–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
      window.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' || e.keyCode === 27) {
          const lightboxEl = document.getElementById('portfolioLightbox');
          if (lightboxEl) {
            const isOpen = lightboxEl.style.display === 'flex' || 
                          lightboxEl.style.display === 'block' ||
                          window.getComputedStyle(lightboxEl).display !== 'none';
            if (isOpen) {
              e.preventDefault();
              console.log('–ó–∞–∫—Ä—ã–≤–∞–µ–º lightbox —á–µ—Ä–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã–π Escape');
              closeLightbox();
            }
          }
        }
      });
      
      // –°–≤–∞–π–ø—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
      let touchStartX = 0;
      let touchEndX = 0;
      
      if (lightboxImage) {
        lightboxImage.addEventListener('touchstart', (e) => {
          touchStartX = e.changedTouches[0].screenX;
        }, { passive: true });
        
        lightboxImage.addEventListener('touchend', (e) => {
          touchEndX = e.changedTouches[0].screenX;
          handleSwipe();
        }, { passive: true });
      }
      
      const handleSwipe = () => {
        const swipeThreshold = 50;
        const diff = touchStartX - touchEndX;
        
        if (Math.abs(diff) > swipeThreshold) {
          if (diff > 0) {
            showNext();
          } else {
            showPrev();
          }
        }
      };
    };

    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => {
        handleNavToggle();
        handleSmoothScroll();
        handleCalculatorToggle();
        handleApplicationModal();
        handleVideoPlay();
        handleCalculatorForm();
        handlePortfolioLightbox();
        initQuickOrderButton();
        setTimeout(initMobileCalculator, 500);
      });
    } else {
      handleNavToggle();
      handleSmoothScroll();
      handleCalculatorToggle();
      handleApplicationModal();
      handleVideoPlay();
      handleCalculatorForm();
      handlePortfolioLightbox();
      initQuickOrderButton();
      setTimeout(initMobileCalculator, 500);
    }
  </script>
  <!-- Application Modal - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ orderModal -->

  </body>
</html>
